

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/Blog/img/favicon.png">
  <link rel="icon" type="image/png" href="/Blog/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  <title>RxJava操作符合集 - ZEKI SPACE</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/Blog/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.1.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/Blog/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"github.com","root":"/Blog/","version":"1.8.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"copy_btn":true,"image_zoom":{"enable":true},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/Blog/js/utils.js" ></script>
  <script  src="/Blog/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.2.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/Blog/">&nbsp;<strong>安卓学弟 ZEKI</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Blog/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Blog/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Blog/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Blog/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/Blog/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner intro-2" id="background" parallax=true
         style="background: url('/Blog/img/bg/banner.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="RxJava操作符合集">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-11-23 11:05" pubdate>
        2020年11月23日 上午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      19.2k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      316
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">RxJava操作符合集</h1>
            
            <div class="markdown-body">
              <h1 id="RxJava2-只看这一篇文章就够了"><a href="#RxJava2-只看这一篇文章就够了" class="headerlink" title="RxJava2 只看这一篇文章就够了"></a>RxJava2 只看这一篇文章就够了</h1><blockquote>
<p>本文由 <a target="_blank" rel="noopener" href="http://renyugang.io/post/75">玉刚说写作平台</a> 提供写作赞助</p>
<p>原作者：<code>ZedeChan</code></p>
<p>版权声明：本文版权归微信公众号 <code>玉刚说</code> 所有，未经许可，不得以任何形式转载</p>
</blockquote>
<h1 id="0-简介"><a href="#0-简介" class="headerlink" title="0. 简介"></a>0. 简介</h1><p>RxJava 其实就是提供一套异步编程的 API，这套 API 是基于观察者模式的，而且是链式调用的，所以使用 RxJava 编写的代码的逻辑会非常简洁。</p>
<p>RxJava 有以下三个基本的元素：</p>
<ol>
<li>被观察者（Observable）</li>
<li>观察者（Observer）</li>
<li>订阅（subscribe）</li>
</ol>
<p>下面来说说以上三者是如何协作的：</p>
<p>首先在 gradle 文件中添加依赖：</p>
<pre><code class="hljs clean"><span class="hljs-keyword">implementation</span> <span class="hljs-string">&#x27;io.reactivex.rxjava2:rxjava:2.1.4&#x27;</span>
<span class="hljs-keyword">implementation</span> <span class="hljs-string">&#x27;io.reactivex.rxjava2:rxandroid:2.0.2&#x27;</span>
复制代码</code></pre>

<ol>
<li>创建被观察者：</li>
</ol>
<pre><code class="hljs reasonml">Observable observable = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Observable</span>.</span></span>create(<span class="hljs-keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;<span class="hljs-literal">()</span> &#123;
    @Override
    public void subscribe(ObservableEmitter&lt;Integer&gt; e) throws Exception &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;=========================currentThread name: &quot;</span> + <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>current<span class="hljs-constructor">Thread()</span>.get<span class="hljs-constructor">Name()</span>);
        e.on<span class="hljs-constructor">Next(1)</span>;
        e.on<span class="hljs-constructor">Next(2)</span>;
        e.on<span class="hljs-constructor">Next(3)</span>;
        e.on<span class="hljs-constructor">Complete()</span>;
    &#125;
&#125;);
复制代码</code></pre>

<ol>
<li>创建观察者：</li>
</ol>
<pre><code class="hljs lasso">Observer observer = <span class="hljs-literal">new</span> Observer&lt;<span class="hljs-built_in">Integer</span>&gt;() &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;======================onSubscribe&quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;======================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;======================onError&quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;======================onComplete&quot;</span>);
    &#125;
&#125;;
复制代码</code></pre>

<ol>
<li>订阅</li>
</ol>
<pre><code class="hljs abnf">observable.subscribe(observer)<span class="hljs-comment">;</span>
复制代码</code></pre>

<p>这里其实也可以使用链式调用：</p>
<pre><code class="hljs lasso">Observable.create(<span class="hljs-literal">new</span> ObservableOnSubscribe &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> subscribe(ObservableEmitter &lt; <span class="hljs-built_in">Integer</span> &gt; e) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;=========================currentThread name: &quot;</span> + <span class="hljs-keyword">Thread</span>.currentThread().getName());
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onComplete();
    &#125;
&#125;)
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;======================onSubscribe&quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;======================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;======================onError&quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;======================onComplete&quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>被观察者发送的事件有以下几种，总结如下表：</p>
<table>
<thead>
<tr>
<th>事件种类</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>onNext()</td>
<td>发送该事件时，观察者会回调 onNext() 方法</td>
</tr>
<tr>
<td>onError()</td>
<td>发送该事件时，观察者会回调 onError() 方法，当发送该事件之后，其他事件将不会继续发送</td>
</tr>
<tr>
<td>onComplete()</td>
<td>发送该事件时，观察者会回调 onComplete() 方法，当发送该事件之后，其他事件将不会继续发送</td>
</tr>
</tbody></table>
<p>其实可以把 RxJava 比喻成一个做果汁，家里有很多种水果（要发送的原始数据），你想榨点水果汁喝一下，这时候你就要想究竟要喝什么水果汁呢？如果你想喝牛油果雪梨柠檬汁，那你就要把这三种水果混在一起榨汁（使用各种操作符变换你想发送给观察者的数据），榨完后，你就可以喝上你想要的果汁了（把处理好的数据发送给观察者）。</p>
<p>总结如下图：</p>
<p><img src="https://user-gold-cdn.xitu.io/2018/5/26/1639a8ee56b13c41?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" srcset="/Blog/img/loading.gif" alt="img"></p>
<p>下面就来讲解 RxJava 各种常见的操作符。</p>
<h1 id="1-创建操作符"><a href="#1-创建操作符" class="headerlink" title="1. 创建操作符"></a>1. 创建操作符</h1><p>以下就是讲解创建被观察者的各种操作符。</p>
<h2 id="1-1-create"><a href="#1-1-create" class="headerlink" title="1.1 create()"></a>1.1 create()</h2><h4 id="方法预览："><a href="#方法预览：" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs vim">public static <span class="hljs-symbol">&lt;T&gt;</span> Observable<span class="hljs-symbol">&lt;T&gt;</span> create(ObservableOnSubscribe<span class="hljs-symbol">&lt;T&gt;</span> <span class="hljs-keyword">source</span>)
复制代码</code></pre>

<h4 id="有什么用："><a href="#有什么用：" class="headerlink" title="有什么用："></a>有什么用：</h4><p>创建一个被观察者</p>
<h4 id="怎么用："><a href="#怎么用：" class="headerlink" title="怎么用："></a>怎么用：</h4><pre><code class="hljs php">Observable&lt;<span class="hljs-keyword">String</span>&gt; observable = Observable.create(<span class="hljs-keyword">new</span> ObservableOnSubscribe&lt;<span class="hljs-keyword">String</span>&gt;() &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> subscribe(ObservableEmitter&lt;<span class="hljs-keyword">String</span>&gt; e) throws <span class="hljs-built_in">Exception</span> &#123;
        e.onNext(<span class="hljs-string">&quot;Hello Observer&quot;</span>);
        e.onComplete();
    &#125;
&#125;);
复制代码</code></pre>

<p>上面的代码非常简单，创建 ObservableOnSubscribe 并重写其 subscribe 方法，就可以通过 ObservableEmitter 发射器向观察者发送事件。</p>
<p>以下创建一个观察者，来验证这个被观察者是否成功创建。</p>
<pre><code class="hljs typescript">Observer&lt;<span class="hljs-built_in">String</span>&gt; observer = <span class="hljs-keyword">new</span> Observer&lt;<span class="hljs-built_in">String</span>&gt;() &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onSubscribe</span>(<span class="hljs-params">Disposable d</span>)</span> &#123;

    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onNext</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> s</span>)</span> &#123;
        Log.d(<span class="hljs-string">&quot;chan&quot;</span>,<span class="hljs-string">&quot;=============onNext &quot;</span> + s);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onError</span>(<span class="hljs-params">Throwable e</span>)</span> &#123;

    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onComplete</span>(<span class="hljs-params"></span>)</span> &#123;
        Log.d(<span class="hljs-string">&quot;chan&quot;</span>,<span class="hljs-string">&quot;=============onComplete &quot;</span>);
    &#125;
&#125;;
        
observable.subscribe(observer);
        
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-20</span> <span class="hljs-number">16</span>:<span class="hljs-number">16</span>:<span class="hljs-number">50.654</span> <span class="hljs-number">22935</span><span class="hljs-number">-22935</span>/com.example.louder.rxjavademo D/chan: =============onNext Hello Observer
=============onComplete
复制代码</code></pre>

<h2 id="1-2-just"><a href="#1-2-just" class="headerlink" title="1.2 just()"></a>1.2 just()</h2><h4 id="方法预览：-1"><a href="#方法预览：-1" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs excel">public static &lt;<span class="hljs-built_in">T</span>&gt; Observable&lt;<span class="hljs-built_in">T</span>&gt; just(<span class="hljs-built_in">T</span> item) 
......
public static &lt;<span class="hljs-built_in">T</span>&gt; Observable&lt;<span class="hljs-built_in">T</span>&gt; just(<span class="hljs-built_in">T</span> item1, <span class="hljs-built_in">T</span> item2, <span class="hljs-built_in">T</span> item3, <span class="hljs-built_in">T</span> item4, <span class="hljs-built_in">T</span> item5, <span class="hljs-built_in">T</span> item6, <span class="hljs-built_in">T</span> item7, <span class="hljs-built_in">T</span> item8, <span class="hljs-built_in">T</span> item9, <span class="hljs-built_in">T</span> item10)
复制代码</code></pre>

<h4 id="有什么用？"><a href="#有什么用？" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>创建一个被观察者，并发送事件，发送的事件不可以超过10个以上。</p>
<h4 id="怎么用？"><a href="#怎么用？" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;=================onSubscribe&quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;=================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;=================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;=================onComplete &quot;</span>);
    &#125;
&#125;);

复制代码</code></pre>

<p>上面的代码直接使用链式调用，代码也非常简单，这里就不细说了，看看打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-20</span> <span class="hljs-number">16</span>:<span class="hljs-number">27</span>:<span class="hljs-number">26.938</span> <span class="hljs-number">23281</span><span class="hljs-number">-23281</span>/? D/chan: =================onSubscribe
=================onNext <span class="hljs-number">1</span>
=================onNext <span class="hljs-number">2</span>
=================onNext <span class="hljs-number">3</span>
=================onComplete 
复制代码</code></pre>

<h2 id="1-3-From-操作符"><a href="#1-3-From-操作符" class="headerlink" title="1.3 From 操作符"></a>1.3 From 操作符</h2><h2 id="1-3-1-fromArray"><a href="#1-3-1-fromArray" class="headerlink" title="1.3.1 fromArray()"></a>1.3.1 fromArray()</h2><h4 id="方法预览：-2"><a href="#方法预览：-2" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs pf">public static <span class="hljs-variable">&lt;T&gt;</span> Observable<span class="hljs-variable">&lt;T&gt;</span> <span class="hljs-keyword">from</span>Array(T... items)
复制代码</code></pre>

<h4 id="有什么用？-1"><a href="#有什么用？-1" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>这个方法和 just() 类似，只不过 fromArray 可以传入多于10个的变量，并且可以传入一个数组。</p>
<h4 id="怎么用？-1"><a href="#怎么用？-1" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs reasonml">Integer <span class="hljs-built_in">array</span><span class="hljs-literal">[]</span> = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Observable</span>.</span></span>from<span class="hljs-constructor">Array(<span class="hljs-params">array</span>)</span>
.subscribe(<span class="hljs-keyword">new</span> Observer &lt; Integer &gt; <span class="hljs-literal">()</span> &#123;
    @Override
    public void on<span class="hljs-constructor">Subscribe(Disposable <span class="hljs-params">d</span>)</span> &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;=================onSubscribe&quot;</span>);
    &#125;

    @Override
    public void on<span class="hljs-constructor">Next(Integer <span class="hljs-params">integer</span>)</span> &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;=================onNext &quot;</span> + integer);
    &#125;

    @Override
    public void on<span class="hljs-constructor">Error(Throwable <span class="hljs-params">e</span>)</span> &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;=================onError &quot;</span>);
    &#125;

    @Override
    public void on<span class="hljs-constructor">Complete()</span> &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;=================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>代码和 just() 基本上一样，直接看打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-20</span> <span class="hljs-number">16</span>:<span class="hljs-number">35</span>:<span class="hljs-number">23.797</span> <span class="hljs-number">23574</span><span class="hljs-number">-23574</span>/com.example.louder.rxjavademo D/chan: =================onSubscribe
=================onNext <span class="hljs-number">1</span>
=================onNext <span class="hljs-number">2</span>
=================onNext <span class="hljs-number">3</span>
=================onNext <span class="hljs-number">4</span>
=================onComplete 
复制代码</code></pre>

<h2 id="1-3-2-fromCallable"><a href="#1-3-2-fromCallable" class="headerlink" title="1.3.2 fromCallable()"></a>1.3.2 fromCallable()</h2><h4 id="方法预览：-3"><a href="#方法预览：-3" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> &lt;T&gt; Observable&lt;T&gt; fromCallable(<span class="hljs-keyword">Callable</span><span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt; supplier)
复制代码</code></pre>

<h4 id="有什么用？-2"><a href="#有什么用？-2" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>这里的 Callable 是 java.util.concurrent 中的 Callable，Callable 和 Runnable 的用法基本一致，只是它会返回一个结果值，这个结果值就是发给观察者的。</p>
<h4 id="怎么用？-2"><a href="#怎么用？-2" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs pgsql">Observable.fromCallable(<span class="hljs-built_in">new</span> Callable &lt; <span class="hljs-type">Integer</span> &gt; () &#123;

    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">Integer</span> <span class="hljs-keyword">call</span>() throws <span class="hljs-keyword">Exception</span> &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    &#125;
&#125;)
.subscribe(<span class="hljs-built_in">new</span> Consumer &lt; <span class="hljs-type">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> accept(<span class="hljs-type">Integer</span> <span class="hljs-type">integer</span>) throws <span class="hljs-keyword">Exception</span> &#123;
        <span class="hljs-keyword">Log</span>.d(TAG, &quot;================accept &quot; + <span class="hljs-type">integer</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">13</span>:<span class="hljs-number">01</span>:<span class="hljs-number">43.009</span> <span class="hljs-number">6890</span><span class="hljs-number">-6890</span>/? D/chan: ================accept <span class="hljs-number">1</span>
复制代码</code></pre>

<h2 id="1-3-3-fromFuture"><a href="#1-3-3-fromFuture" class="headerlink" title="1.3.3 fromFuture()"></a>1.3.3 fromFuture()</h2><h4 id="方法预览：-4"><a href="#方法预览：-4" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs oxygene"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Observable&lt;T&gt; fromFuture(<span class="hljs-keyword">Future</span>&lt;? extends T&gt; <span class="hljs-keyword">future</span>)
复制代码</code></pre>

<h4 id="有什么用？-3"><a href="#有什么用？-3" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>参数中的 Future 是 java.util.concurrent 中的 Future，Future 的作用是增加了 cancel() 等方法操作 Callable，它可以通过 get() 方法来获取 Callable 返回的值。</p>
<h4 id="怎么用？-3"><a href="#怎么用？-3" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs aspectj">FutureTask &lt; String &gt; futureTask = <span class="hljs-keyword">new</span> FutureTask &lt; &gt; (<span class="hljs-keyword">new</span> Callable &lt; String &gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function">String <span class="hljs-title">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;
        Log.d(TAG, <span class="hljs-string">&quot;CallableDemo is Running&quot;</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;返回结果&quot;</span>;
    &#125;
&#125;);

Observable.fromFuture(futureTask)
    .doOnSubscribe(<span class="hljs-keyword">new</span> Consumer &lt; Disposable &gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">accept</span><span class="hljs-params">(Disposable disposable)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;
        futureTask.run();
    &#125;
&#125;)
.subscribe(<span class="hljs-keyword">new</span> Consumer &lt; String &gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">accept</span><span class="hljs-params">(String s)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;
        Log.d(TAG, <span class="hljs-string">&quot;================accept &quot;</span> + s);
    &#125;
&#125;);
复制代码</code></pre>

<p>doOnSubscribe() 的作用就是只有订阅时才会发送事件，具体会在下面讲解。</p>
<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">13</span>:<span class="hljs-number">54</span>:<span class="hljs-number">00.470</span> <span class="hljs-number">14429</span><span class="hljs-number">-14429</span>/com.example.rxjavademo D/chan: CallableDemo <span class="hljs-keyword">is</span> Running
================accept 返回结果
复制代码</code></pre>

<h2 id="1-3-4-fromIterable"><a href="#1-3-4-fromIterable" class="headerlink" title="1.3.4 fromIterable()"></a>1.3.4 fromIterable()</h2><h4 id="方法预览：-5"><a href="#方法预览：-5" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> &lt;T&gt; Observable&lt;T&gt; fromIterable(<span class="hljs-keyword">Iterable</span><span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt; source)
复制代码</code></pre>

<h4 id="有什么用？-4"><a href="#有什么用？-4" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>直接发送一个 List 集合数据给观察者</p>
<h4 id="怎么用？-4"><a href="#怎么用？-4" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso"><span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">Integer</span>&gt; <span class="hljs-built_in">list</span> = <span class="hljs-literal">new</span> ArrayList&lt;&gt;();
<span class="hljs-built_in">list</span>.add(<span class="hljs-number">0</span>);
<span class="hljs-built_in">list</span>.add(<span class="hljs-number">1</span>);
<span class="hljs-built_in">list</span>.add(<span class="hljs-number">2</span>);
<span class="hljs-built_in">list</span>.add(<span class="hljs-number">3</span>);
Observable.fromIterable(<span class="hljs-built_in">list</span>)
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;=================onSubscribe&quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;=================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;=================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;=================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果如下：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-20</span> <span class="hljs-number">16</span>:<span class="hljs-number">43</span>:<span class="hljs-number">28.874</span> <span class="hljs-number">23965</span><span class="hljs-number">-23965</span>/? D/chan: =================onSubscribe
=================onNext <span class="hljs-number">0</span>
=================onNext <span class="hljs-number">1</span>
=================onNext <span class="hljs-number">2</span>
=================onNext <span class="hljs-number">3</span>
=================onComplete 

复制代码</code></pre>

<h2 id="1-4-defer"><a href="#1-4-defer" class="headerlink" title="1.4 defer()"></a>1.4 defer()</h2><h4 id="方法预览：-6"><a href="#方法预览：-6" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> &lt;T&gt; Observable&lt;T&gt; defer(<span class="hljs-keyword">Callable</span><span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt;&gt; supplier)
复制代码</code></pre>

<h4 id="有什么用？-5"><a href="#有什么用？-5" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>这个方法的作用就是直到被观察者被订阅后才会创建被观察者。</p>
<h4 id="怎么用？-5"><a href="#怎么用？-5" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs php"><span class="hljs-comment">// i 要定义为成员变量</span>
<span class="hljs-keyword">Integer</span> i = <span class="hljs-number">100</span>;
        
Observable&lt;<span class="hljs-keyword">Integer</span>&gt; observable = Observable.defer(<span class="hljs-keyword">new</span> <span class="hljs-keyword">Callable</span>&lt;ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> <span class="hljs-keyword">Integer</span>&gt;&gt;() &#123;
    @Override
    <span class="hljs-keyword">public</span> ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> <span class="hljs-keyword">Integer</span>&gt; call() throws <span class="hljs-built_in">Exception</span> &#123;
        <span class="hljs-keyword">return</span> Observable.just(i);
    &#125;
&#125;);

i = <span class="hljs-number">200</span>;

Observer observer = <span class="hljs-keyword">new</span> Observer&lt;<span class="hljs-keyword">Integer</span>&gt;() &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onSubscribe(Disposable d) &#123;

    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onNext(<span class="hljs-keyword">Integer</span> <span class="hljs-keyword">integer</span>) &#123;
        Log.d(TAG, <span class="hljs-string">&quot;================onNext &quot;</span> + <span class="hljs-keyword">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onError(<span class="hljs-built_in">Throwable</span> e) &#123;

    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onComplete() &#123;

    &#125;
&#125;;

observable.subscribe(observer);

i = <span class="hljs-number">300</span>;

observable.subscribe(observer);
复制代码</code></pre>

<p>打印结果如下：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-20</span> <span class="hljs-number">20</span>:<span class="hljs-number">05</span>:<span class="hljs-number">01.443</span> <span class="hljs-number">26622</span><span class="hljs-number">-26622</span>/? D/chan: ================onNext <span class="hljs-number">200</span>
================onNext <span class="hljs-number">300</span>
复制代码</code></pre>

<p>因为 defer() 只有观察者订阅的时候才会创建新的被观察者，所以每订阅一次就会打印一次，并且都是打印 i 最新的值。</p>
<h2 id="1-5-timer"><a href="#1-5-timer" class="headerlink" title="1.5 timer()"></a>1.5 timer()</h2><h4 id="方法预览：-7"><a href="#方法预览：-7" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Observable&lt;Long&gt; <span class="hljs-title">timer</span>(<span class="hljs-params"><span class="hljs-built_in">long</span> delay, TimeUnit <span class="hljs-built_in">unit</span></span>) </span>
<span class="hljs-function">......</span>
<span class="hljs-function">复制代码</span></code></pre>

<h4 id="有什么用？-6"><a href="#有什么用？-6" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>当到指定时间后就会发送一个 0L 的值给观察者。</p>
<h4 id="怎么用？-6"><a href="#怎么用？-6" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs less"><span class="hljs-selector-tag">Observable</span><span class="hljs-selector-class">.timer</span>(<span class="hljs-number">2</span>, TimeUnit.SECONDS)
<span class="hljs-selector-class">.subscribe</span>(new Observer &lt; Long &gt; () &#123;
    <span class="hljs-variable">@Override</span>
    public void onSubscribe(Disposable d) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onNext(Long aLong) &#123;
        <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;===============onNext &quot;</span> + aLong);
    &#125;

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onError</span>(Throwable e) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onComplete() &#123;

    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-20</span> <span class="hljs-number">20</span>:<span class="hljs-number">27</span>:<span class="hljs-number">48.004</span> <span class="hljs-number">27204</span><span class="hljs-number">-27259</span>/com.example.louder.rxjavademo D/chan: ===============onNext <span class="hljs-number">0</span>
复制代码</code></pre>

<h2 id="1-6-interval"><a href="#1-6-interval" class="headerlink" title="1.6 interval()"></a>1.6 interval()</h2><h4 id="方法预览：-8"><a href="#方法预览：-8" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Observable&lt;Long&gt; <span class="hljs-title">interval</span>(<span class="hljs-params"><span class="hljs-built_in">long</span> period, TimeUnit <span class="hljs-built_in">unit</span></span>)</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Observable&lt;Long&gt; <span class="hljs-title">interval</span>(<span class="hljs-params"><span class="hljs-built_in">long</span> initialDelay, <span class="hljs-built_in">long</span> period, TimeUnit <span class="hljs-built_in">unit</span></span>)</span>
<span class="hljs-function">......</span>
<span class="hljs-function">复制代码</span></code></pre>

<h4 id="有什么用？-7"><a href="#有什么用？-7" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>每隔一段时间就会发送一个事件，这个事件是从0开始，不断增1的数字。</p>
<h4 id="怎么用？-7"><a href="#怎么用？-7" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs less"><span class="hljs-selector-tag">Observable</span><span class="hljs-selector-class">.interval</span>(<span class="hljs-number">4</span>, TimeUnit.SECONDS)
<span class="hljs-selector-class">.subscribe</span>(new Observer &lt; Long &gt; () &#123;
    <span class="hljs-variable">@Override</span>
    public void onSubscribe(Disposable d) &#123;
        <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;==============onSubscribe &quot;</span>);
    &#125;

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onNext</span>(Long aLong) &#123;
        <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;==============onNext &quot;</span> + aLong);
    &#125;

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onError</span>(Throwable e) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onComplete() &#123;

    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-20</span> <span class="hljs-number">20</span>:<span class="hljs-number">48</span>:<span class="hljs-number">10.321</span> <span class="hljs-number">28723</span><span class="hljs-number">-28723</span>/com.example.louder.rxjavademo D/chan: ==============onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-20</span> <span class="hljs-number">20</span>:<span class="hljs-number">48</span>:<span class="hljs-number">14.324</span> <span class="hljs-number">28723</span><span class="hljs-number">-28746</span>/com.example.louder.rxjavademo D/chan: ==============onNext <span class="hljs-number">0</span>
<span class="hljs-number">05</span><span class="hljs-number">-20</span> <span class="hljs-number">20</span>:<span class="hljs-number">48</span>:<span class="hljs-number">18.324</span> <span class="hljs-number">28723</span><span class="hljs-number">-28746</span>/com.example.louder.rxjavademo D/chan: ==============onNext <span class="hljs-number">1</span>
<span class="hljs-number">05</span><span class="hljs-number">-20</span> <span class="hljs-number">20</span>:<span class="hljs-number">48</span>:<span class="hljs-number">22.323</span> <span class="hljs-number">28723</span><span class="hljs-number">-28746</span>/com.example.louder.rxjavademo D/chan: ==============onNext <span class="hljs-number">2</span>
<span class="hljs-number">05</span><span class="hljs-number">-20</span> <span class="hljs-number">20</span>:<span class="hljs-number">48</span>:<span class="hljs-number">26.323</span> <span class="hljs-number">28723</span><span class="hljs-number">-28746</span>/com.example.louder.rxjavademo D/chan: ==============onNext <span class="hljs-number">3</span>
<span class="hljs-number">05</span><span class="hljs-number">-20</span> <span class="hljs-number">20</span>:<span class="hljs-number">48</span>:<span class="hljs-number">30.323</span> <span class="hljs-number">28723</span><span class="hljs-number">-28746</span>/com.example.louder.rxjavademo D/chan: ==============onNext <span class="hljs-number">4</span>
<span class="hljs-number">05</span><span class="hljs-number">-20</span> <span class="hljs-number">20</span>:<span class="hljs-number">48</span>:<span class="hljs-number">34.323</span> <span class="hljs-number">28723</span><span class="hljs-number">-28746</span>/com.example.louder.rxjavademo D/chan: ==============onNext <span class="hljs-number">5</span>
复制代码</code></pre>

<p>从时间就可以看出每隔4秒就会发出一次数字递增1的事件。这里说下 interval() 第三个方法的 initialDelay 参数，这个参数的意思就是 onSubscribe 回调之后，再次回调 onNext 的间隔时间。</p>
<h2 id="1-7-intervalRange"><a href="#1-7-intervalRange" class="headerlink" title="1.7 intervalRange()"></a>1.7 intervalRange()</h2><h4 id="方法预览：-9"><a href="#方法预览：-9" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs reasonml">public static Observable&lt;Long&gt; interval<span class="hljs-constructor">Range(<span class="hljs-params">long</span> <span class="hljs-params">start</span>, <span class="hljs-params">long</span> <span class="hljs-params">count</span>, <span class="hljs-params">long</span> <span class="hljs-params">initialDelay</span>, <span class="hljs-params">long</span> <span class="hljs-params">period</span>, TimeUnit <span class="hljs-params">unit</span>)</span>
public static Observable&lt;Long&gt; interval<span class="hljs-constructor">Range(<span class="hljs-params">long</span> <span class="hljs-params">start</span>, <span class="hljs-params">long</span> <span class="hljs-params">count</span>, <span class="hljs-params">long</span> <span class="hljs-params">initialDelay</span>, <span class="hljs-params">long</span> <span class="hljs-params">period</span>, TimeUnit <span class="hljs-params">unit</span>, Scheduler <span class="hljs-params">scheduler</span>)</span>
复制代码</code></pre>

<h4 id="有什么用？-8"><a href="#有什么用？-8" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>可以指定发送事件的开始值和数量，其他与 interval() 的功能一样。</p>
<h4 id="怎么用？-8"><a href="#怎么用？-8" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs less"><span class="hljs-selector-tag">Observable</span><span class="hljs-selector-class">.intervalRange</span>(<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, TimeUnit.SECONDS)
<span class="hljs-selector-class">.subscribe</span>(new Observer &lt; Long &gt; () &#123;
    <span class="hljs-variable">@Override</span>
    public void onSubscribe(Disposable d) &#123;
        <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;==============onSubscribe &quot;</span>);
    &#125;

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onNext</span>(Long aLong) &#123;
        <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;==============onNext &quot;</span> + aLong);
    &#125;

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onError</span>(Throwable e) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onComplete() &#123;

    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">00</span>:<span class="hljs-number">03</span>:<span class="hljs-number">01.672</span> <span class="hljs-number">2504</span><span class="hljs-number">-2504</span>/com.example.louder.rxjavademo D/chan: ==============onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">00</span>:<span class="hljs-number">03</span>:<span class="hljs-number">03.674</span> <span class="hljs-number">2504</span><span class="hljs-number">-2537</span>/com.example.louder.rxjavademo D/chan: ==============onNext <span class="hljs-number">2</span>
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">00</span>:<span class="hljs-number">03</span>:<span class="hljs-number">04.674</span> <span class="hljs-number">2504</span><span class="hljs-number">-2537</span>/com.example.louder.rxjavademo D/chan: ==============onNext <span class="hljs-number">3</span>
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">00</span>:<span class="hljs-number">03</span>:<span class="hljs-number">05.674</span> <span class="hljs-number">2504</span><span class="hljs-number">-2537</span>/com.example.louder.rxjavademo D/chan: ==============onNext <span class="hljs-number">4</span>
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">00</span>:<span class="hljs-number">03</span>:<span class="hljs-number">06.673</span> <span class="hljs-number">2504</span><span class="hljs-number">-2537</span>/com.example.louder.rxjavademo D/chan: ==============onNext <span class="hljs-number">5</span>
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">00</span>:<span class="hljs-number">03</span>:<span class="hljs-number">07.674</span> <span class="hljs-number">2504</span><span class="hljs-number">-2537</span>/com.example.louder.rxjavademo D/chan: ==============onNext <span class="hljs-number">6</span>
复制代码</code></pre>

<p>可以看出收到5次 onNext 事件，并且是从 2 开始的。</p>
<h2 id="1-8-range"><a href="#1-8-range" class="headerlink" title="1.8 range()"></a>1.8 range()</h2><h4 id="方法预览：-10"><a href="#方法预览：-10" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs fortran"><span class="hljs-keyword">public</span> static Observable&lt;<span class="hljs-keyword">Integer</span>&gt; <span class="hljs-built_in">range</span>(<span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> start, <span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> <span class="hljs-built_in">count</span>)
复制代码</code></pre>

<h4 id="有什么用？-9"><a href="#有什么用？-9" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>同时发送一定范围的事件序列。</p>
<h4 id="怎么用？-9"><a href="#怎么用？-9" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs less"><span class="hljs-selector-tag">Observable</span><span class="hljs-selector-class">.range</span>(<span class="hljs-number">2</span>, <span class="hljs-number">5</span>)
<span class="hljs-selector-class">.subscribe</span>(new Observer &lt; Integer &gt; () &#123;
    <span class="hljs-variable">@Override</span>
    public void onSubscribe(Disposable d) &#123;
        <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;==============onSubscribe &quot;</span>);
    &#125;

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onNext</span>(Integer aLong) &#123;
        <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;==============onNext &quot;</span> + aLong);
    &#125;

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onError</span>(Throwable e) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onComplete() &#123;

    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">00</span>:<span class="hljs-number">09</span>:<span class="hljs-number">17.202</span> <span class="hljs-number">2921</span><span class="hljs-number">-2921</span>/? D/chan: ==============onSubscribe 
==============onNext <span class="hljs-number">2</span>
==============onNext <span class="hljs-number">3</span>
==============onNext <span class="hljs-number">4</span>
==============onNext <span class="hljs-number">5</span>
==============onNext <span class="hljs-number">6</span>
复制代码</code></pre>

<h2 id="1-9-rangeLong"><a href="#1-9-rangeLong" class="headerlink" title="1.9 rangeLong()"></a>1.9 rangeLong()</h2><h4 id="方法预览：-11"><a href="#方法预览：-11" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Observable&lt;Long&gt; <span class="hljs-title">rangeLong</span>(<span class="hljs-params"><span class="hljs-built_in">long</span> start, <span class="hljs-built_in">long</span> count</span>)</span>
<span class="hljs-function">复制代码</span></code></pre>

<h4 id="有什么用？-10"><a href="#有什么用？-10" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>作用与 range() 一样，只是数据类型为 Long</p>
<h4 id="怎么用？-10"><a href="#怎么用？-10" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>用法与 range() 一样，这里就不再赘述了。</p>
<h2 id="1-10-empty-amp-never-amp-error"><a href="#1-10-empty-amp-never-amp-error" class="headerlink" title="1.10 empty() &amp; never() &amp; error()"></a>1.10 empty() &amp; never() &amp; error()</h2><h4 id="方法预览：-12"><a href="#方法预览：-12" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-function">Observable&lt;T&gt; <span class="hljs-title">empty</span>(<span class="hljs-params"></span>)</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Observable&lt;T&gt; <span class="hljs-title">never</span>(<span class="hljs-params"></span>)</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; Observable&lt;T&gt; <span class="hljs-title">error</span>(<span class="hljs-params">final Throwable exception</span>)</span>
<span class="hljs-function">复制代码</span></code></pre>

<h4 id="有什么用？-11"><a href="#有什么用？-11" class="headerlink" title="有什么用？"></a>有什么用？</h4><ol>
<li>empty() ： 直接发送 onComplete() 事件</li>
<li>never()：不发送任何事件</li>
<li>error()：发送 onError() 事件</li>
</ol>
<h4 id="怎么用？-11"><a href="#怎么用？-11" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs typescript">Observable.empty()
.subscribe(<span class="hljs-keyword">new</span> Observer &lt; <span class="hljs-built_in">Object</span> &gt; () &#123;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onSubscribe</span>(<span class="hljs-params">Disposable d</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onSubscribe&quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onNext</span>(<span class="hljs-params"><span class="hljs-built_in">Object</span> o</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onNext&quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onError</span>(<span class="hljs-params">Throwable e</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onError &quot;</span> + e);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onComplete</span>(<span class="hljs-params"></span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onComplete&quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">14</span>:<span class="hljs-number">06</span>:<span class="hljs-number">11.881</span> <span class="hljs-number">15798</span><span class="hljs-number">-15798</span>/com.example.rxjavademo D/chan: ==================onSubscribe
==================onComplete
复制代码</code></pre>

<p>换成 never() 的打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">14</span>:<span class="hljs-number">12</span>:<span class="hljs-number">17.554</span> <span class="hljs-number">16805</span><span class="hljs-number">-16805</span>/com.example.rxjavademo D/chan: ==================onSubscribe
复制代码</code></pre>

<p>换成 error() 的打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">14</span>:<span class="hljs-number">12</span>:<span class="hljs-number">58.483</span> <span class="hljs-number">17817</span><span class="hljs-number">-17817</span>/com.example.rxjavademo D/chan: ==================onSubscribe
==================onError java.lang.NullPointerException
复制代码</code></pre>

<h1 id="2-转换操作符"><a href="#2-转换操作符" class="headerlink" title="2. 转换操作符"></a>2. 转换操作符</h1><h2 id="2-1-map"><a href="#2-1-map" class="headerlink" title="2.1 map()"></a>2.1 map()</h2><h4 id="方法预览：-13"><a href="#方法预览：-13" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs fortran"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> &lt;R&gt; Observable&lt;R&gt; map(<span class="hljs-function"><span class="hljs-keyword">Function</span></span>&lt;? super T, ? <span class="hljs-keyword">extends</span> R&gt; mapper)
复制代码</code></pre>

<h4 id="有什么用？-12"><a href="#有什么用？-12" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>map 可以将被观察者发送的数据类型转变成其他的类型</p>
<h4 id="怎么用？-12"><a href="#怎么用？-12" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>以下代码将 Integer 类型的数据转换成 String。</p>
<pre><code class="hljs typescript">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
.map(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span> &lt; Integer, <span class="hljs-built_in">String</span> &gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> apply(Integer integer) throws Exception &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;I&#x27;m &quot;</span> + integer;
    &#125;
&#125;)
.subscribe(<span class="hljs-keyword">new</span> Observer &lt; <span class="hljs-built_in">String</span> &gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onSubscribe</span>(<span class="hljs-params">Disposable d</span>)</span> &#123;
        Log.e(TAG, <span class="hljs-string">&quot;===================onSubscribe&quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onNext</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> s</span>)</span> &#123;
        Log.e(TAG, <span class="hljs-string">&quot;===================onNext &quot;</span> + s);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onError</span>(<span class="hljs-params">Throwable e</span>)</span> &#123;

    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onComplete</span>(<span class="hljs-params"></span>)</span> &#123;

    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs diff">05-21 09:16:03.490 5700-5700/com.example.rxjavademo E/chan: <span class="hljs-comment">===================onSubscribe</span>
<span class="hljs-comment">===================onNext I&#x27;m 1</span>
<span class="hljs-comment">===================onNext I&#x27;m 2</span>
<span class="hljs-comment">===================onNext I&#x27;m 3</span>
复制代码</code></pre>

<h2 id="2-2-flatMap"><a href="#2-2-flatMap" class="headerlink" title="2.2 flatMap()"></a>2.2 flatMap()</h2><h4 id="方法预览：-14"><a href="#方法预览：-14" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs fortran"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> &lt;R&gt; Observable&lt;R&gt; flatMap(<span class="hljs-function"><span class="hljs-keyword">Function</span></span>&lt;? super T, ? <span class="hljs-keyword">extends</span> ObservableSource&lt;? <span class="hljs-keyword">extends</span> R&gt;&gt; mapper)
<span class="hljs-number">.</span><span class="hljs-number">.</span><span class="hljs-number">.</span><span class="hljs-number">.</span><span class="hljs-number">.</span><span class="hljs-number">.</span>
复制代码</code></pre>

<h4 id="有什么用？-13"><a href="#有什么用？-13" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>这个方法可以将事件序列中的元素进行整合加工，返回一个新的被观察者。</p>
<h4 id="怎么用？-13"><a href="#怎么用？-13" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>flatMap() 其实与 map() 类似，但是 flatMap() 返回的是一个 Observerable。现在用一个例子来说明 flatMap() 的用法。</p>
<p>假设一个有一个 Person 类，这个类的定义如下：</p>
<pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;

    <span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> name;
    <span class="hljs-keyword">private</span> List&lt;Plan&gt; planList = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">Person</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name, List&lt;Plan&gt; planList</span>)</span> &#123;
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.planList = planList;
    &#125;

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getName</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> name;
    &#125;

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>)</span> &#123;
        <span class="hljs-built_in">this</span>.name = name;
    &#125;

    <span class="hljs-keyword">public</span> List&lt;Plan&gt; <span class="hljs-function"><span class="hljs-title">getPlanList</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> planList;
    &#125;

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setPlanList</span>(<span class="hljs-params">List&lt;Plan&gt; planList</span>)</span> &#123;
        <span class="hljs-built_in">this</span>.planList = planList;
    &#125;

&#125;
复制代码</code></pre>

<p>Person 类有一个 name 和 planList 两个变量，分别代表的是人名和计划清单。</p>
<p>Plan 类的定义如下：</p>
<pre><code class="hljs typescript"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Plan</span> </span>&#123;

    <span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> time;
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> content;
    <span class="hljs-keyword">private</span> List&lt;<span class="hljs-built_in">String</span>&gt; actionList = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">Plan</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> time, <span class="hljs-built_in">String</span> content</span>)</span> &#123;
        <span class="hljs-built_in">this</span>.time = time;
        <span class="hljs-built_in">this</span>.content = content;
    &#125;

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getTime</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> time;
    &#125;

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setTime</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> time</span>)</span> &#123;
        <span class="hljs-built_in">this</span>.time = time;
    &#125;

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getContent</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> content;
    &#125;

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setContent</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> content</span>)</span> &#123;
        <span class="hljs-built_in">this</span>.content = content;
    &#125;

    <span class="hljs-keyword">public</span> List&lt;<span class="hljs-built_in">String</span>&gt; <span class="hljs-function"><span class="hljs-title">getActionList</span>(<span class="hljs-params"></span>)</span> &#123;
        <span class="hljs-keyword">return</span> actionList;
    &#125;

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">setActionList</span>(<span class="hljs-params">List&lt;<span class="hljs-built_in">String</span>&gt; actionList</span>)</span> &#123;
        <span class="hljs-built_in">this</span>.actionList = actionList;
    &#125;
&#125;
复制代码</code></pre>

<p>现在有一个需求就是要将 Person 集合中的每个元素中的 Plan 的 action 打印出来。 首先用 map() 来实现这个需求看看：</p>
<pre><code class="hljs typescript">Observable.fromIterable(personList)
.map(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span> &lt; Person, List &lt; Plan &gt;&gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List &lt; Plan &gt; apply(Person person) throws Exception &#123;
        <span class="hljs-keyword">return</span> person.getPlanList();
    &#125;
&#125;)
.subscribe(<span class="hljs-keyword">new</span> Observer &lt; List &lt; Plan &gt;&gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onSubscribe</span>(<span class="hljs-params">Disposable d</span>)</span> &#123;

    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onNext</span>(<span class="hljs-params">List &lt; Plan &gt; plans</span>)</span> &#123;
        <span class="hljs-keyword">for</span> (Plan plan: plans) &#123;
            List &lt; <span class="hljs-built_in">String</span> &gt; planActionList = plan.getActionList();
            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">String</span> action: planActionList) &#123;
                Log.d(TAG, <span class="hljs-string">&quot;==================action &quot;</span> + action);
            &#125;
        &#125;
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onError</span>(<span class="hljs-params">Throwable e</span>)</span> &#123;

    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onComplete</span>(<span class="hljs-params"></span>)</span> &#123;

    &#125;
&#125;);
复制代码</code></pre>

<p>可以看到 onNext() 用了嵌套 for 循环来实现，如果代码逻辑复杂起来的话，可能需要多重循环才可以实现。</p>
<p>现在看下使用 flatMap() 实现：</p>
<pre><code class="hljs typescript">Observable.fromIterable(personList)
.flatMap(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span> &lt; Person, ObservableSource &lt; Plan &gt;&gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ObservableSource &lt; Plan &gt; <span class="hljs-function"><span class="hljs-title">apply</span>(<span class="hljs-params">Person person</span>)</span> &#123;
        <span class="hljs-keyword">return</span> Observable.fromIterable(person.getPlanList());
    &#125;
&#125;)
.flatMap(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span> &lt; Plan, ObservableSource &lt; <span class="hljs-built_in">String</span> &gt;&gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ObservableSource &lt; <span class="hljs-built_in">String</span> &gt; apply(Plan plan) throws Exception &#123;
        <span class="hljs-keyword">return</span> Observable.fromIterable(plan.getActionList());
    &#125;
&#125;)
.subscribe(<span class="hljs-keyword">new</span> Observer &lt; <span class="hljs-built_in">String</span> &gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onSubscribe</span>(<span class="hljs-params">Disposable d</span>)</span> &#123;

    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onNext</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> s</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================action: &quot;</span> + s);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onError</span>(<span class="hljs-params">Throwable e</span>)</span> &#123;

    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onComplete</span>(<span class="hljs-params"></span>)</span> &#123;

    &#125;
&#125;);
复制代码</code></pre>

<p>从代码可以看出，只需要两个 flatMap() 就可以完成需求，并且代码逻辑非常清晰。</p>
<h2 id="2-3-concatMap"><a href="#2-3-concatMap" class="headerlink" title="2.3 concatMap()"></a>2.3 concatMap()</h2><h4 id="方法预览：-15"><a href="#方法预览：-15" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs fortran"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> &lt;R&gt; Observable&lt;R&gt; concatMap(<span class="hljs-function"><span class="hljs-keyword">Function</span></span>&lt;? super T, ? <span class="hljs-keyword">extends</span> ObservableSource&lt;? <span class="hljs-keyword">extends</span> R&gt;&gt; mapper)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> &lt;R&gt; Observable&lt;R&gt; concatMap(<span class="hljs-function"><span class="hljs-keyword">Function</span></span>&lt;? super T, ? <span class="hljs-keyword">extends</span> ObservableSource&lt;? <span class="hljs-keyword">extends</span> R&gt;&gt; mapper, <span class="hljs-built_in">int</span> prefetch)
复制代码</code></pre>

<h4 id="有什么用？-14"><a href="#有什么用？-14" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>concatMap() 和 flatMap() 基本上是一样的，只不过 concatMap() 转发出来的事件是有序的，而 flatMap() 是无序的。</p>
<h4 id="怎么用？-14"><a href="#怎么用？-14" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>还是使用上面 flatMap() 的例子来讲解，首先来试下 flatMap() 来验证发送的事件是否是无序的，代码如下：</p>
<pre><code class="hljs less"><span class="hljs-selector-tag">Observable</span><span class="hljs-selector-class">.fromIterable</span>(personList)
<span class="hljs-selector-class">.flatMap</span>(new Function &lt; Person, ObservableSource &lt; Plan &gt;&gt; () &#123;
    <span class="hljs-variable">@Override</span>
    public ObservableSource &lt; Plan &gt; apply(Person person) &#123;
        <span class="hljs-selector-tag">if</span> (<span class="hljs-string">&quot;chan&quot;</span>.equals(person.getName())) &#123;
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Observable</span><span class="hljs-selector-class">.fromIterable</span>(person.getPlanList())<span class="hljs-selector-class">.delay</span>(<span class="hljs-number">10</span>, TimeUnit.MILLISECONDS);
        &#125;
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Observable</span><span class="hljs-selector-class">.fromIterable</span>(person.getPlanList());
    &#125;
&#125;)
<span class="hljs-selector-class">.subscribe</span>(new Observer &lt; Plan &gt; () &#123;
    <span class="hljs-variable">@Override</span>
    public void onSubscribe(Disposable d) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onNext(Plan plan) &#123;
        <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;==================plan &quot;</span> + plan.getContent());
    &#125;

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onError</span>(Throwable e) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onComplete() &#123;

    &#125;
&#125;);
复制代码</code></pre>

<p>为了更好的验证 flatMap 是无序的，使用了一个 delay() 方法来延迟，直接看打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">13</span>:<span class="hljs-number">57</span>:<span class="hljs-number">14.031</span> <span class="hljs-number">21616</span><span class="hljs-number">-21616</span>/com.example.rxjavademo D/chan: ==================plan chan 上课
==================plan chan 写作业
==================plan chan 打篮球
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">13</span>:<span class="hljs-number">57</span>:<span class="hljs-number">14.041</span> <span class="hljs-number">21616</span><span class="hljs-number">-21641</span>/com.example.rxjavademo D/chan: ==================plan Zede 开会
==================plan Zede 写代码
==================plan Zede 写文章
复制代码</code></pre>

<p>可以看到本来 Zede 的事件发送顺序是排在 chan 事件之前，但是经过延迟后， 这两个事件序列发送顺序互换了。</p>
<p>现在来验证下 concatMap() 是否是有序的，使用上面同样的代码，只是把 flatMap() 换成 concatMap()，打印结果如下：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">13</span>:<span class="hljs-number">58</span>:<span class="hljs-number">42.917</span> <span class="hljs-number">21799</span><span class="hljs-number">-21823</span>/com.example.rxjavademo D/chan: ==================plan Zede 开会
==================plan Zede 写代码
==================plan Zede 写文章
==================plan chan 上课
==================plan chan 写作业
==================plan chan 打篮球
复制代码</code></pre>

<p>这就代表 concatMap() 转换后发送的事件序列是有序的了。</p>
<h2 id="2-4-buffer"><a href="#2-4-buffer" class="headerlink" title="2.4 buffer()"></a>2.4 buffer()</h2><h4 id="方法预览：-16"><a href="#方法预览：-16" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs axapta"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;List&lt;T&gt;&gt; buffer(<span class="hljs-built_in">int</span> <span class="hljs-keyword">count</span>, <span class="hljs-built_in">int</span> skip)
......
复制代码</code></pre>

<h4 id="有什么用？-15"><a href="#有什么用？-15" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>从需要发送的事件当中获取一定数量的事件，并将这些事件放到缓冲区当中一并发出。</p>
<h4 id="怎么用？-15"><a href="#怎么用？-15" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>buffer 有两个参数，一个是 count，另一个 skip。count 缓冲区元素的数量，skip 就代表缓冲区满了之后，发送下一次事件序列的时候要跳过多少元素。这样说可能还是有点抽象，直接看代码：</p>
<pre><code class="hljs less"><span class="hljs-selector-tag">Observable</span><span class="hljs-selector-class">.just</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
<span class="hljs-selector-class">.buffer</span>(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>)
<span class="hljs-selector-class">.subscribe</span>(new Observer &lt; List &lt; Integer &gt;&gt; () &#123;
    <span class="hljs-variable">@Override</span>
    public void onSubscribe(Disposable d) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onNext(List &lt; Integer &gt; integers) &#123;
        <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;================缓冲区大小： &quot;</span> + integers.size());
        <span class="hljs-selector-tag">for</span> (Integer <span class="hljs-attribute">i</span>: integers) &#123;
            <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;================元素： &quot;</span> + i);
        &#125;
    &#125;

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onError</span>(Throwable e) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onComplete() &#123;

    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">14</span>:<span class="hljs-number">09</span>:<span class="hljs-number">34.015</span> <span class="hljs-number">22421</span><span class="hljs-number">-22421</span>/com.example.rxjavademo D/chan: ================缓冲区大小： <span class="hljs-number">2</span>
================元素： <span class="hljs-number">1</span>
================元素： <span class="hljs-number">2</span>
================缓冲区大小： <span class="hljs-number">2</span>
================元素： <span class="hljs-number">2</span>
================元素： <span class="hljs-number">3</span>
================缓冲区大小： <span class="hljs-number">2</span>
================元素： <span class="hljs-number">3</span>
================元素： <span class="hljs-number">4</span>
================缓冲区大小： <span class="hljs-number">2</span>
================元素： <span class="hljs-number">4</span>
================元素： <span class="hljs-number">5</span>
================缓冲区大小： <span class="hljs-number">1</span>
================元素： <span class="hljs-number">5</span>
复制代码</code></pre>

<p>从结果可以看出，每次发送事件，指针都会往后移动一个元素再取值，直到指针移动到没有元素的时候就会停止取值。</p>
<h2 id="2-5-groupBy"><a href="#2-5-groupBy" class="headerlink" title="2.5 groupBy()"></a>2.5 groupBy()</h2><h4 id="方法预览：-17"><a href="#方法预览：-17" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs fortran"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> &lt;K&gt; Observable&lt;GroupedObservable&lt;K, T&gt;&gt; groupBy(<span class="hljs-function"><span class="hljs-keyword">Function</span></span>&lt;? super T, ? <span class="hljs-keyword">extends</span> K&gt; keySelector)
复制代码</code></pre>

<h4 id="有什么用？-16"><a href="#有什么用？-16" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>将发送的数据进行分组，每个分组都会返回一个被观察者。</p>
<h4 id="怎么用？-16"><a href="#怎么用？-16" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.just(<span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">7</span>, <span class="hljs-number">10</span>)
.groupBy(<span class="hljs-literal">new</span> Function &lt; <span class="hljs-built_in">Integer</span>, <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">Integer</span> apply(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) throws Exception &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">integer</span> % <span class="hljs-number">3</span>;
    &#125;
&#125;)
.subscribe(<span class="hljs-literal">new</span> Observer &lt; GroupedObservable &lt; <span class="hljs-built_in">Integer</span>, <span class="hljs-built_in">Integer</span> &gt;&gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(GroupedObservable &lt; <span class="hljs-built_in">Integer</span>, <span class="hljs-built_in">Integer</span> &gt; integerIntegerGroupedObservable) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================onNext &quot;</span>);
        integerIntegerGroupedObservable.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
            @Override
            <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
                <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================GroupedObservable onSubscribe &quot;</span>);
            &#125;

            @Override
            <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
                <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================GroupedObservable onNext  groupName: &quot;</span> + integerIntegerGroupedObservable.getKey() + <span class="hljs-string">&quot; value: &quot;</span> + <span class="hljs-built_in">integer</span>);
            &#125;

            @Override
            <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
                <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================GroupedObservable onError &quot;</span>);
            &#125;

            @Override
            <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
                <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================GroupedObservable onComplete &quot;</span>);
            &#125;
        &#125;);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>在 groupBy() 方法返回的参数是分组的名字，每返回一个值，那就代表会创建一个组，以上的代码就是将1~10的数据分成3组，来看看打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">14</span>:<span class="hljs-number">38</span>:<span class="hljs-number">02.062</span> <span class="hljs-number">21451</span><span class="hljs-number">-21451</span>/com.example.rxjavademo D/chan: ====================onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">14</span>:<span class="hljs-number">38</span>:<span class="hljs-number">02.063</span> <span class="hljs-number">21451</span><span class="hljs-number">-21451</span>/com.example.rxjavademo D/chan: ====================onNext 
====================GroupedObservable onSubscribe     ====================GroupedObservable onNext  groupName: <span class="hljs-number">2</span> value: <span class="hljs-number">5</span>
====================GroupedObservable onNext  groupName: <span class="hljs-number">2</span> value: <span class="hljs-number">2</span>
====================onNext 
====================GroupedObservable onSubscribe 
====================GroupedObservable onNext  groupName: <span class="hljs-number">0</span> value: <span class="hljs-number">3</span>
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">14</span>:<span class="hljs-number">38</span>:<span class="hljs-number">02.064</span> <span class="hljs-number">21451</span><span class="hljs-number">-21451</span>/com.example.rxjavademo D/chan: ====================onNext 
====================GroupedObservable onSubscribe 
====================GroupedObservable onNext  groupName: <span class="hljs-number">1</span> value: <span class="hljs-number">4</span>
====================GroupedObservable onNext  groupName: <span class="hljs-number">1</span> value: <span class="hljs-number">1</span>
====================GroupedObservable onNext  groupName: <span class="hljs-number">0</span> value: <span class="hljs-number">6</span>
====================GroupedObservable onNext  groupName: <span class="hljs-number">2</span> value: <span class="hljs-number">8</span>
====================GroupedObservable onNext  groupName: <span class="hljs-number">0</span> value: <span class="hljs-number">9</span>
====================GroupedObservable onNext  groupName: <span class="hljs-number">1</span> value: <span class="hljs-number">7</span>
====================GroupedObservable onNext  groupName: <span class="hljs-number">1</span> value: <span class="hljs-number">10</span>
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">14</span>:<span class="hljs-number">38</span>:<span class="hljs-number">02.065</span> <span class="hljs-number">21451</span><span class="hljs-number">-21451</span>/com.example.rxjavademo D/chan: ====================GroupedObservable onComplete 
====================GroupedObservable onComplete 
====================GroupedObservable onComplete 
====================onComplete 
复制代码</code></pre>

<p>可以看到返回的结果中是有3个组的。</p>
<h2 id="2-6-scan"><a href="#2-6-scan" class="headerlink" title="2.6 scan()"></a>2.6 scan()</h2><h4 id="方法预览：-18"><a href="#方法预览：-18" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs excel">public final Observable&lt;<span class="hljs-built_in">T</span>&gt; scan(BiFunction&lt;<span class="hljs-built_in">T</span>, <span class="hljs-built_in">T</span>, <span class="hljs-built_in">T</span>&gt; accumulator)
复制代码</code></pre>

<h4 id="有什么用？-17"><a href="#有什么用？-17" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>将数据以一定的逻辑聚合起来。</p>
<h4 id="怎么用？-17"><a href="#怎么用？-17" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
.scan(<span class="hljs-literal">new</span> BiFunction &lt; <span class="hljs-built_in">Integer</span>, <span class="hljs-built_in">Integer</span>, <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">Integer</span> apply(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>, <span class="hljs-built_in">Integer</span> integer2) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================apply &quot;</span>);
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================integer &quot;</span> + <span class="hljs-built_in">integer</span>);
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================integer2 &quot;</span> + integer2);
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">integer</span> + integer2;
    &#125;
&#125;)
.subscribe(<span class="hljs-literal">new</span> Consumer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> accept(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================accept &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">14</span>:<span class="hljs-number">45</span>:<span class="hljs-number">27.784</span> <span class="hljs-number">22519</span><span class="hljs-number">-22519</span>/com.example.rxjavademo D/chan: ====================accept <span class="hljs-number">1</span>
====================apply 
====================<span class="hljs-built_in">int</span>eger <span class="hljs-number">1</span>
====================<span class="hljs-built_in">int</span>eger2 <span class="hljs-number">2</span>
====================accept <span class="hljs-number">3</span>
====================apply 
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">14</span>:<span class="hljs-number">45</span>:<span class="hljs-number">27.785</span> <span class="hljs-number">22519</span><span class="hljs-number">-22519</span>/com.example.rxjavademo D/chan: ====================<span class="hljs-built_in">int</span>eger <span class="hljs-number">3</span>
====================<span class="hljs-built_in">int</span>eger2 <span class="hljs-number">3</span>
====================accept <span class="hljs-number">6</span>
====================apply 
====================<span class="hljs-built_in">int</span>eger <span class="hljs-number">6</span>
====================<span class="hljs-built_in">int</span>eger2 <span class="hljs-number">4</span>
====================accept <span class="hljs-number">10</span>
====================apply 
====================<span class="hljs-built_in">int</span>eger <span class="hljs-number">10</span>
====================<span class="hljs-built_in">int</span>eger2 <span class="hljs-number">5</span>
====================accept <span class="hljs-number">15</span>
复制代码</code></pre>

<h2 id="2-7-window"><a href="#2-7-window" class="headerlink" title="2.7 window()"></a>2.7 window()</h2><h4 id="方法预览：-19"><a href="#方法预览：-19" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs axapta"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;Observable&lt;T&gt;&gt; window(<span class="hljs-built_in">long</span> <span class="hljs-keyword">count</span>)
......
复制代码</code></pre>

<h4 id="有什么用？-18"><a href="#有什么用？-18" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>发送指定数量的事件时，就将这些事件分为一组。window 中的 count 的参数就是代表指定的数量，例如将 count 指定为2，那么每发2个数据就会将这2个数据分成一组。</p>
<h4 id="怎么用？-18"><a href="#怎么用？-18" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs typescript">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
.window(<span class="hljs-number">2</span>)
.subscribe(<span class="hljs-keyword">new</span> Observer &lt; Observable &lt; Integer &gt;&gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onSubscribe</span>(<span class="hljs-params">Disposable d</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;=====================onSubscribe &quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onNext</span>(<span class="hljs-params">Observable &lt; Integer &gt; integerObservable</span>)</span> &#123;
        integerObservable.subscribe(<span class="hljs-keyword">new</span> Observer &lt; Integer &gt; () &#123;
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onSubscribe</span>(<span class="hljs-params">Disposable d</span>)</span> &#123;
                Log.d(TAG, <span class="hljs-string">&quot;=====================integerObservable onSubscribe &quot;</span>);
            &#125;

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onNext</span>(<span class="hljs-params">Integer integer</span>)</span> &#123;
                Log.d(TAG, <span class="hljs-string">&quot;=====================integerObservable onNext &quot;</span> + integer);
            &#125;

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onError</span>(<span class="hljs-params">Throwable e</span>)</span> &#123;
                Log.d(TAG, <span class="hljs-string">&quot;=====================integerObservable onError &quot;</span>);
            &#125;

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onComplete</span>(<span class="hljs-params"></span>)</span> &#123;
                Log.d(TAG, <span class="hljs-string">&quot;=====================integerObservable onComplete &quot;</span>);
            &#125;
        &#125;);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onError</span>(<span class="hljs-params">Throwable e</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;=====================onError &quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onComplete</span>(<span class="hljs-params"></span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;=====================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">15</span>:<span class="hljs-number">02</span>:<span class="hljs-number">20.654</span> <span class="hljs-number">25838</span><span class="hljs-number">-25838</span>/com.example.rxjavademo D/chan: =====================onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">15</span>:<span class="hljs-number">02</span>:<span class="hljs-number">20.655</span> <span class="hljs-number">25838</span><span class="hljs-number">-25838</span>/com.example.rxjavademo D/chan: =====================<span class="hljs-built_in">int</span>egerObservable onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">15</span>:<span class="hljs-number">02</span>:<span class="hljs-number">20.656</span> <span class="hljs-number">25838</span><span class="hljs-number">-25838</span>/com.example.rxjavademo D/chan: =====================<span class="hljs-built_in">int</span>egerObservable onNext <span class="hljs-number">1</span>
=====================<span class="hljs-built_in">int</span>egerObservable onNext <span class="hljs-number">2</span>
=====================<span class="hljs-built_in">int</span>egerObservable onComplete 
=====================<span class="hljs-built_in">int</span>egerObservable onSubscribe 
=====================<span class="hljs-built_in">int</span>egerObservable onNext <span class="hljs-number">3</span>
=====================<span class="hljs-built_in">int</span>egerObservable onNext <span class="hljs-number">4</span>
=====================<span class="hljs-built_in">int</span>egerObservable onComplete 
=====================<span class="hljs-built_in">int</span>egerObservable onSubscribe 
=====================<span class="hljs-built_in">int</span>egerObservable onNext <span class="hljs-number">5</span>
=====================<span class="hljs-built_in">int</span>egerObservable onComplete 
=====================onComplete 
复制代码</code></pre>

<p>从结果可以发现，window() 将 1~5 的事件分成了3组。</p>
<h1 id="3-组合操作符"><a href="#3-组合操作符" class="headerlink" title="3. 组合操作符"></a>3. 组合操作符</h1><h2 id="3-1-concat"><a href="#3-1-concat" class="headerlink" title="3.1 concat()"></a>3.1 concat()</h2><h4 id="方法预览：-20"><a href="#方法预览：-20" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> &lt;T&gt; Observable&lt;T&gt; concat(ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt; source1, ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt; source2, ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt; source3, ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt; source4)
......
复制代码</code></pre>

<h4 id="有什么用？-19"><a href="#有什么用？-19" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>可以将多个观察者组合在一起，然后按照之前发送顺序发送事件。需要注意的是，concat() 最多只可以发送4个事件。</p>
<h4 id="怎么用？-19"><a href="#怎么用？-19" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs less"><span class="hljs-selector-tag">Observable</span><span class="hljs-selector-class">.concat</span>(Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>),
Observable.just(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>),
Observable.just(<span class="hljs-number">5</span>, <span class="hljs-number">6</span>),
Observable.just(<span class="hljs-number">7</span>, <span class="hljs-number">8</span>))
<span class="hljs-selector-class">.subscribe</span>(new Observer &lt; Integer &gt; () &#123;
    <span class="hljs-variable">@Override</span>
    public void onSubscribe(Disposable d) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onNext(Integer integer) &#123;
        <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;================onNext &quot;</span> + integer);
    &#125;

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onError</span>(Throwable e) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onComplete() &#123;

    &#125;
&#125;);
复制代码</code></pre>

<p>打印如下：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">15</span>:<span class="hljs-number">40</span>:<span class="hljs-number">26.738</span> <span class="hljs-number">7477</span><span class="hljs-number">-7477</span>/com.example.rxjavademo D/chan: ================onNext <span class="hljs-number">1</span>
================onNext <span class="hljs-number">2</span>
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">15</span>:<span class="hljs-number">40</span>:<span class="hljs-number">26.739</span> <span class="hljs-number">7477</span><span class="hljs-number">-7477</span>/com.example.rxjavademo D/chan: ================onNext <span class="hljs-number">3</span>
================onNext <span class="hljs-number">4</span>
================onNext <span class="hljs-number">5</span>
================onNext <span class="hljs-number">6</span>
================onNext <span class="hljs-number">7</span>
================onNext <span class="hljs-number">8</span>
复制代码</code></pre>

<h2 id="3-2-concatArray"><a href="#3-2-concatArray" class="headerlink" title="3.2 concatArray()"></a>3.2 concatArray()</h2><h4 id="方法预览：-21"><a href="#方法预览：-21" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> &lt;T&gt; Observable&lt;T&gt; concatArray(ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt;... sources)
复制代码</code></pre>

<h4 id="有什么用？-20"><a href="#有什么用？-20" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>与 concat() 作用一样，不过 concatArray() 可以发送多于 4 个被观察者。</p>
<h4 id="怎么用？-20"><a href="#怎么用？-20" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs less"><span class="hljs-selector-tag">Observable</span><span class="hljs-selector-class">.concatArray</span>(Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>),
Observable.just(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>),
Observable.just(<span class="hljs-number">5</span>, <span class="hljs-number">6</span>),
Observable.just(<span class="hljs-number">7</span>, <span class="hljs-number">8</span>),
Observable.just(<span class="hljs-number">9</span>, <span class="hljs-number">10</span>))
<span class="hljs-selector-class">.subscribe</span>(new Observer &lt; Integer &gt; () &#123;
    <span class="hljs-variable">@Override</span>
    public void onSubscribe(Disposable d) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onNext(Integer integer) &#123;
        <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;================onNext &quot;</span> + integer);
    &#125;

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onError</span>(Throwable e) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onComplete() &#123;

    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">15</span>:<span class="hljs-number">47</span>:<span class="hljs-number">18.581</span> <span class="hljs-number">9129</span><span class="hljs-number">-9129</span>/com.example.rxjavademo D/chan: ================onNext <span class="hljs-number">1</span>
================onNext <span class="hljs-number">2</span>
================onNext <span class="hljs-number">3</span>
================onNext <span class="hljs-number">4</span>
================onNext <span class="hljs-number">5</span>
================onNext <span class="hljs-number">6</span>
================onNext <span class="hljs-number">7</span>
================onNext <span class="hljs-number">8</span>
================onNext <span class="hljs-number">9</span>
================onNext <span class="hljs-number">10</span>
复制代码</code></pre>

<h2 id="3-3-merge"><a href="#3-3-merge" class="headerlink" title="3.3 merge()"></a>3.3 merge()</h2><h4 id="方法预览：-22"><a href="#方法预览：-22" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs php"> <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> &lt;T&gt; Observable&lt;T&gt; merge(ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt; source1, ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt; source2, ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt; source3, ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt; source4)
......
复制代码</code></pre>

<h4 id="有什么用？-21"><a href="#有什么用？-21" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>这个方法月 concat() 作用基本一样，知识 concat() 是串行发送事件，而 merge() 并行发送事件。</p>
<h4 id="怎么用？-21"><a href="#怎么用？-21" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>现在来演示 concat() 和 merge() 的区别。</p>
<pre><code class="hljs less"><span class="hljs-selector-tag">Observable</span><span class="hljs-selector-class">.merge</span>(
Observable.interval(<span class="hljs-number">1</span>, TimeUnit.SECONDS).map(new Function &lt; Long, String &gt; () &#123;
    <span class="hljs-variable">@Override</span>
    public String apply(Long aLong) throws Exception &#123;
        return <span class="hljs-string">&quot;A&quot;</span> + aLong;
    &#125;
&#125;),
Observable.interval(<span class="hljs-number">1</span>, TimeUnit.SECONDS).map(new Function &lt; Long, String &gt; () &#123;
    <span class="hljs-variable">@Override</span>
    public String apply(Long aLong) throws Exception &#123;
        return <span class="hljs-string">&quot;B&quot;</span> + aLong;
    &#125;
&#125;))
    <span class="hljs-selector-class">.subscribe</span>(new Observer &lt; String &gt; () &#123;
    <span class="hljs-variable">@Override</span>
    public void onSubscribe(Disposable d) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onNext(String s) &#123;
        <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;=====================onNext &quot;</span> + s);
    &#125;

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onError</span>(Throwable e) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onComplete() &#123;

    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果如下：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">10</span>:<span class="hljs-number">31.125</span> <span class="hljs-number">12801</span><span class="hljs-number">-12850</span>/com.example.rxjavademo D/chan: =====================onNext B0
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">10</span>:<span class="hljs-number">31.125</span> <span class="hljs-number">12801</span><span class="hljs-number">-12849</span>/com.example.rxjavademo D/chan: =====================onNext A0
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">10</span>:<span class="hljs-number">32.125</span> <span class="hljs-number">12801</span><span class="hljs-number">-12849</span>/com.example.rxjavademo D/chan: =====================onNext A1
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">10</span>:<span class="hljs-number">32.126</span> <span class="hljs-number">12801</span><span class="hljs-number">-12850</span>/com.example.rxjavademo D/chan: =====================onNext B1
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">10</span>:<span class="hljs-number">33.125</span> <span class="hljs-number">12801</span><span class="hljs-number">-12849</span>/com.example.rxjavademo D/chan: =====================onNext A2
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">10</span>:<span class="hljs-number">33.125</span> <span class="hljs-number">12801</span><span class="hljs-number">-12850</span>/com.example.rxjavademo D/chan: =====================onNext B2
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">10</span>:<span class="hljs-number">34.125</span> <span class="hljs-number">12801</span><span class="hljs-number">-12849</span>/com.example.rxjavademo D/chan: =====================onNext A3
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">10</span>:<span class="hljs-number">34.125</span> <span class="hljs-number">12801</span><span class="hljs-number">-12850</span>/com.example.rxjavademo D/chan: =====================onNext B3
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">10</span>:<span class="hljs-number">35.124</span> <span class="hljs-number">12801</span><span class="hljs-number">-12849</span>/com.example.rxjavademo D/chan: =====================onNext A4
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">10</span>:<span class="hljs-number">35.125</span> <span class="hljs-number">12801</span><span class="hljs-number">-12850</span>/com.example.rxjavademo D/chan: =====================onNext B4
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">10</span>:<span class="hljs-number">36.125</span> <span class="hljs-number">12801</span><span class="hljs-number">-12849</span>/com.example.rxjavademo D/chan: =====================onNext A5
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">10</span>:<span class="hljs-number">36.125</span> <span class="hljs-number">12801</span><span class="hljs-number">-12850</span>/com.example.rxjavademo D/chan: =====================onNext B5
......
复制代码</code></pre>

<p>从结果可以看出，A 和 B 的事件序列都可以发出，将以上的代码换成 concat() 看看打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">17</span>:<span class="hljs-number">52.352</span> <span class="hljs-number">14597</span><span class="hljs-number">-14621</span>/com.example.rxjavademo D/chan: =====================onNext A0
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">17</span>:<span class="hljs-number">53.351</span> <span class="hljs-number">14597</span><span class="hljs-number">-14621</span>/com.example.rxjavademo D/chan: =====================onNext A1
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">17</span>:<span class="hljs-number">54.351</span> <span class="hljs-number">14597</span><span class="hljs-number">-14621</span>/com.example.rxjavademo D/chan: =====================onNext A2
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">17</span>:<span class="hljs-number">55.351</span> <span class="hljs-number">14597</span><span class="hljs-number">-14621</span>/com.example.rxjavademo D/chan: =====================onNext A3
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">17</span>:<span class="hljs-number">56.351</span> <span class="hljs-number">14597</span><span class="hljs-number">-14621</span>/com.example.rxjavademo D/chan: =====================onNext A4
<span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">17</span>:<span class="hljs-number">57.351</span> <span class="hljs-number">14597</span><span class="hljs-number">-14621</span>/com.example.rxjavademo D/chan: =====================onNext A5
......
复制代码</code></pre>

<p>从结果可以知道，只有等到第一个被观察者发送完事件之后，第二个被观察者才会发送事件。</p>
<p>mergeArray() 与 merge() 的作用是一样的，只是它可以发送4个以上的被观察者，这里就不再赘述了。</p>
<h2 id="3-4-concatArrayDelayError-amp-mergeArrayDelayError"><a href="#3-4-concatArrayDelayError-amp-mergeArrayDelayError" class="headerlink" title="3.4 concatArrayDelayError() &amp; mergeArrayDelayError()"></a>3.4 concatArrayDelayError() &amp; mergeArrayDelayError()</h2><h4 id="方法预览：-23"><a href="#方法预览：-23" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> &lt;T&gt; Observable&lt;T&gt; concatArrayDelayError(ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt;... sources)
<span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> &lt;T&gt; Observable&lt;T&gt; mergeArrayDelayError(ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt;... sources)
复制代码</code></pre>

<h4 id="有什么用？-22"><a href="#有什么用？-22" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>在 concatArray() 和 mergeArray() 两个方法当中，如果其中有一个被观察者发送了一个 Error 事件，那么就会停止发送事件，如果你想 onError() 事件延迟到所有被观察者都发送完事件后再执行的话，就可以使用 concatArrayDelayError() 和 mergeArrayDelayError()</p>
<h4 id="怎么用？-22"><a href="#怎么用？-22" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>首先使用 concatArray() 来验证一下发送 onError() 事件是否会中断其他被观察者发送事件，代码如下：</p>
<pre><code class="hljs less"><span class="hljs-selector-tag">Observable</span><span class="hljs-selector-class">.concatArray</span>(
Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;
    <span class="hljs-variable">@Override</span>
    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onError(new NumberFormatException());
    &#125;
&#125;), Observable.just(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>))
    <span class="hljs-selector-class">.subscribe</span>(new Observer &lt; Integer &gt; () &#123;
    <span class="hljs-variable">@Override</span>
    public void onSubscribe(Disposable d) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onNext(Integer integer) &#123;
        <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;===================onNext &quot;</span> + integer);
    &#125;

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onError</span>(Throwable e) &#123;
        <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;===================onError &quot;</span>);
    &#125;

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onComplete</span>() &#123;

    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">38</span>:<span class="hljs-number">59.725</span> <span class="hljs-number">17985</span><span class="hljs-number">-17985</span>/com.example.rxjavademo D/chan: ===================onNext <span class="hljs-number">1</span>
===================onError 
复制代码</code></pre>

<p>从结果可以知道，确实中断了，现在换用 concatArrayDelayError()，代码如下：</p>
<pre><code class="hljs less"><span class="hljs-selector-tag">Observable</span><span class="hljs-selector-class">.concatArrayDelayError</span>(
Observable.create(new ObservableOnSubscribe &lt; Integer &gt; () &#123;
    <span class="hljs-variable">@Override</span>
    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onError(new NumberFormatException());
    &#125;
&#125;), Observable.just(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>))
<span class="hljs-selector-class">.subscribe</span>(new Observer &lt; Integer &gt; () &#123;
    <span class="hljs-variable">@Override</span>
    public void onSubscribe(Disposable d) &#123;

    &#125;

    <span class="hljs-variable">@Override</span>
    public void onNext(Integer integer) &#123;
        <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;===================onNext &quot;</span> + integer);
    &#125;

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onError</span>(Throwable e) &#123;
        <span class="hljs-selector-tag">Log</span><span class="hljs-selector-class">.d</span>(TAG, <span class="hljs-string">&quot;===================onError &quot;</span>);
    &#125;

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">onComplete</span>() &#123;

    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果如下：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-21</span> <span class="hljs-number">16</span>:<span class="hljs-number">40</span>:<span class="hljs-number">59.329</span> <span class="hljs-number">18199</span><span class="hljs-number">-18199</span>/com.example.rxjavademo D/chan: ===================onNext <span class="hljs-number">1</span>
===================onNext <span class="hljs-number">2</span>
===================onNext <span class="hljs-number">3</span>
===================onNext <span class="hljs-number">4</span>
===================onError 
复制代码</code></pre>

<p>从结果可以看到，onError 事件是在所有被观察者发送完事件才发送的。mergeArrayDelayError() 也是有同样的作用，这里不再赘述。</p>
<h2 id="3-5-zip"><a href="#3-5-zip" class="headerlink" title="3.5 zip()"></a>3.5 zip()</h2><h4 id="方法预览：-24"><a href="#方法预览：-24" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs mipsasm">public static &lt;<span class="hljs-built_in">T1</span>, <span class="hljs-built_in">T2</span>, R&gt; Observable&lt;R&gt; zip(ObservableSource&lt;? <span class="hljs-keyword">extends </span><span class="hljs-built_in">T1</span>&gt; source1, ObservableSource&lt;? <span class="hljs-keyword">extends </span><span class="hljs-built_in">T2</span>&gt; source2, <span class="hljs-keyword">BiFunction&lt;? </span>super <span class="hljs-built_in">T1</span>, ? super <span class="hljs-built_in">T2</span>, ? <span class="hljs-keyword">extends </span>R&gt; zipper)
......
复制代码</code></pre>

<h4 id="有什么用？-23"><a href="#有什么用？-23" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>会将多个被观察者合并，根据各个被观察者发送事件的顺序一个个结合起来，最终发送的事件数量会与源 Observable 中最少事件的数量一样。</p>
<h4 id="怎么用？-23"><a href="#怎么用？-23" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs typescript">Observable.zip(Observable.intervalRange(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, TimeUnit.SECONDS)
    .map(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span>&lt;Long, <span class="hljs-built_in">String</span>&gt;() &#123;
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> apply(Long aLong) throws Exception &#123;
            <span class="hljs-built_in">String</span> s1 = <span class="hljs-string">&quot;A&quot;</span> + aLong;
            Log.d(TAG, <span class="hljs-string">&quot;===================A 发送的事件 &quot;</span> + s1);
            <span class="hljs-keyword">return</span> s1;
        &#125;&#125;),
        Observable.intervalRange(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, TimeUnit.SECONDS)
            .map(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span>&lt;Long, <span class="hljs-built_in">String</span>&gt;() &#123;
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> apply(Long aLong) throws Exception &#123;
                <span class="hljs-built_in">String</span> s2 = <span class="hljs-string">&quot;B&quot;</span> + aLong;
                Log.d(TAG, <span class="hljs-string">&quot;===================B 发送的事件 &quot;</span> + s2);
                <span class="hljs-keyword">return</span> s2;
            &#125;
        &#125;),
        <span class="hljs-keyword">new</span> BiFunction&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt;() &#123;
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> apply(<span class="hljs-built_in">String</span> s, <span class="hljs-built_in">String</span> s2) throws Exception &#123;
                <span class="hljs-built_in">String</span> res = s + s2;
                <span class="hljs-keyword">return</span> res;
            &#125;
        &#125;)
.subscribe(<span class="hljs-keyword">new</span> Observer&lt;<span class="hljs-built_in">String</span>&gt;() &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onSubscribe</span>(<span class="hljs-params">Disposable d</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;===================onSubscribe &quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onNext</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> s</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;===================onNext &quot;</span> + s);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onError</span>(<span class="hljs-params">Throwable e</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;===================onError &quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onComplete</span>(<span class="hljs-params"></span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;===================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>上面代码中有两个 Observable，第一个发送事件的数量为5个，第二个发送事件的数量为6个。现在来看下打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">09</span>:<span class="hljs-number">10</span>:<span class="hljs-number">39.952</span> <span class="hljs-number">5338</span><span class="hljs-number">-5338</span>/com.example.rxjavademo D/chan: ===================onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">09</span>:<span class="hljs-number">10</span>:<span class="hljs-number">40.953</span> <span class="hljs-number">5338</span><span class="hljs-number">-5362</span>/com.example.rxjavademo D/chan: ===================A 发送的事件 A1
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">09</span>:<span class="hljs-number">10</span>:<span class="hljs-number">40.953</span> <span class="hljs-number">5338</span><span class="hljs-number">-5363</span>/com.example.rxjavademo D/chan: ===================B 发送的事件 B1
===================onNext A1B1
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">09</span>:<span class="hljs-number">10</span>:<span class="hljs-number">41.953</span> <span class="hljs-number">5338</span><span class="hljs-number">-5362</span>/com.example.rxjavademo D/chan: ===================A 发送的事件 A2
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">09</span>:<span class="hljs-number">10</span>:<span class="hljs-number">41.954</span> <span class="hljs-number">5338</span><span class="hljs-number">-5363</span>/com.example.rxjavademo D/chan: ===================B 发送的事件 B2
===================onNext A2B2
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">09</span>:<span class="hljs-number">10</span>:<span class="hljs-number">42.953</span> <span class="hljs-number">5338</span><span class="hljs-number">-5362</span>/com.example.rxjavademo D/chan: ===================A 发送的事件 A3
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">09</span>:<span class="hljs-number">10</span>:<span class="hljs-number">42.953</span> <span class="hljs-number">5338</span><span class="hljs-number">-5363</span>/com.example.rxjavademo D/chan: ===================B 发送的事件 B3
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">09</span>:<span class="hljs-number">10</span>:<span class="hljs-number">42.953</span> <span class="hljs-number">5338</span><span class="hljs-number">-5362</span>/com.example.rxjavademo D/chan: ===================onNext A3B3
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">09</span>:<span class="hljs-number">10</span>:<span class="hljs-number">43.953</span> <span class="hljs-number">5338</span><span class="hljs-number">-5362</span>/com.example.rxjavademo D/chan: ===================A 发送的事件 A4
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">09</span>:<span class="hljs-number">10</span>:<span class="hljs-number">43.953</span> <span class="hljs-number">5338</span><span class="hljs-number">-5363</span>/com.example.rxjavademo D/chan: ===================B 发送的事件 B4
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">09</span>:<span class="hljs-number">10</span>:<span class="hljs-number">43.954</span> <span class="hljs-number">5338</span><span class="hljs-number">-5363</span>/com.example.rxjavademo D/chan: ===================onNext A4B4
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">09</span>:<span class="hljs-number">10</span>:<span class="hljs-number">44.953</span> <span class="hljs-number">5338</span><span class="hljs-number">-5362</span>/com.example.rxjavademo D/chan: ===================A 发送的事件 A5
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">09</span>:<span class="hljs-number">10</span>:<span class="hljs-number">44.953</span> <span class="hljs-number">5338</span><span class="hljs-number">-5363</span>/com.example.rxjavademo D/chan: ===================B 发送的事件 B5
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">09</span>:<span class="hljs-number">10</span>:<span class="hljs-number">44.954</span> <span class="hljs-number">5338</span><span class="hljs-number">-5363</span>/com.example.rxjavademo D/chan: ===================onNext A5B5
===================onComplete 
复制代码</code></pre>

<p>可以发现最终接收到的事件数量是5，那么为什么第二个 Observable 没有发送第6个事件呢？因为在这之前第一个 Observable 已经发送了 onComplete 事件，所以第二个 Observable 不会再发送事件。</p>
<h2 id="3-6-combineLatest-amp-combineLatestDelayError"><a href="#3-6-combineLatest-amp-combineLatestDelayError" class="headerlink" title="3.6 combineLatest() &amp; combineLatestDelayError()"></a>3.6 combineLatest() &amp; combineLatestDelayError()</h2><h4 id="方法预览：-25"><a href="#方法预览：-25" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs mipsasm">public static &lt;<span class="hljs-built_in">T1</span>, <span class="hljs-built_in">T2</span>, R&gt; Observable&lt;R&gt; combineLatest(ObservableSource&lt;? <span class="hljs-keyword">extends </span><span class="hljs-built_in">T1</span>&gt; source1, ObservableSource&lt;? <span class="hljs-keyword">extends </span><span class="hljs-built_in">T2</span>&gt; source2, <span class="hljs-keyword">BiFunction&lt;? </span>super <span class="hljs-built_in">T1</span>, ? super <span class="hljs-built_in">T2</span>, ? <span class="hljs-keyword">extends </span>R&gt; combiner)
....... 
复制代码</code></pre>

<h4 id="有什么用？-24"><a href="#有什么用？-24" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>combineLatest() 的作用与 zip() 类似，但是 combineLatest() 发送事件的序列是与发送的时间线有关的，当 combineLatest() 中所有的 Observable 都发送了事件，只要其中有一个 Observable 发送事件，这个事件就会和其他 Observable 最近发送的事件结合起来发送，这样可能还是比较抽象，看看以下例子代码。</p>
<h4 id="怎么用？-24"><a href="#怎么用？-24" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs typescript">Observable.combineLatest(
Observable.intervalRange(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, TimeUnit.SECONDS)
    .map(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span> &lt; Long, <span class="hljs-built_in">String</span> &gt; () &#123;<span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> apply(Long aLong) throws Exception &#123;
        <span class="hljs-built_in">String</span> s1 = <span class="hljs-string">&quot;A&quot;</span> + aLong;
        Log.d(TAG, <span class="hljs-string">&quot;===================A 发送的事件 &quot;</span> + s1);
        <span class="hljs-keyword">return</span> s1;
    &#125;
&#125;),
Observable.intervalRange(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, TimeUnit.SECONDS)
    .map(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span> &lt; Long, <span class="hljs-built_in">String</span> &gt; () &#123;<span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> apply(Long aLong) throws Exception &#123;
        <span class="hljs-built_in">String</span> s2 = <span class="hljs-string">&quot;B&quot;</span> + aLong;
        Log.d(TAG, <span class="hljs-string">&quot;===================B 发送的事件 &quot;</span> + s2);
        <span class="hljs-keyword">return</span> s2;
    &#125;
&#125;),
<span class="hljs-keyword">new</span> BiFunction &lt; <span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span> &gt; () &#123;<span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">String</span> apply(<span class="hljs-built_in">String</span> s, <span class="hljs-built_in">String</span> s2) throws Exception &#123;
        <span class="hljs-built_in">String</span> res = s + s2;
        <span class="hljs-keyword">return</span> res;
    &#125;
&#125;)
.subscribe(<span class="hljs-keyword">new</span> Observer &lt; <span class="hljs-built_in">String</span> &gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onSubscribe</span>(<span class="hljs-params">Disposable d</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;===================onSubscribe &quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onNext</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> s</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;===================最终接收到的事件 &quot;</span> + s);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onError</span>(<span class="hljs-params">Throwable e</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;===================onError &quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onComplete</span>(<span class="hljs-params"></span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;===================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>分析上面的代码，Observable A 会每隔1秒就发送一次事件，Observable B 会隔2秒发送一次事件。来看看打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">41</span>:<span class="hljs-number">20.859</span> <span class="hljs-number">15104</span><span class="hljs-number">-15104</span>/? D/chan: ===================onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">41</span>:<span class="hljs-number">21.859</span> <span class="hljs-number">15104</span><span class="hljs-number">-15128</span>/com.example.rxjavademo D/chan: ===================A 发送的事件 A1
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">41</span>:<span class="hljs-number">22.860</span> <span class="hljs-number">15104</span><span class="hljs-number">-15128</span>/com.example.rxjavademo D/chan: ===================A 发送的事件 A2
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">41</span>:<span class="hljs-number">22.861</span> <span class="hljs-number">15104</span><span class="hljs-number">-15129</span>/com.example.rxjavademo D/chan: ===================B 发送的事件 B1
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">41</span>:<span class="hljs-number">22.862</span> <span class="hljs-number">15104</span><span class="hljs-number">-15129</span>/com.example.rxjavademo D/chan: ===================最终接收到的事件 A2B1
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">41</span>:<span class="hljs-number">23.860</span> <span class="hljs-number">15104</span><span class="hljs-number">-15128</span>/com.example.rxjavademo D/chan: ===================A 发送的事件 A3
===================最终接收到的事件 A3B1
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">41</span>:<span class="hljs-number">24.860</span> <span class="hljs-number">15104</span><span class="hljs-number">-15128</span>/com.example.rxjavademo D/chan: ===================A 发送的事件 A4
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">41</span>:<span class="hljs-number">24.861</span> <span class="hljs-number">15104</span><span class="hljs-number">-15129</span>/com.example.rxjavademo D/chan: ===================B 发送的事件 B2
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">41</span>:<span class="hljs-number">24.861</span> <span class="hljs-number">15104</span><span class="hljs-number">-15128</span>/com.example.rxjavademo D/chan: ===================最终接收到的事件 A4B1
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">41</span>:<span class="hljs-number">24.861</span> <span class="hljs-number">15104</span><span class="hljs-number">-15129</span>/com.example.rxjavademo D/chan: ===================最终接收到的事件 A4B2
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">41</span>:<span class="hljs-number">26.860</span> <span class="hljs-number">15104</span><span class="hljs-number">-15129</span>/com.example.rxjavademo D/chan: ===================B 发送的事件 B3
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">41</span>:<span class="hljs-number">26.861</span> <span class="hljs-number">15104</span><span class="hljs-number">-15129</span>/com.example.rxjavademo D/chan: ===================最终接收到的事件 A4B3
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">41</span>:<span class="hljs-number">28.860</span> <span class="hljs-number">15104</span><span class="hljs-number">-15129</span>/com.example.rxjavademo D/chan: ===================B 发送的事件 B4
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">41</span>:<span class="hljs-number">28.861</span> <span class="hljs-number">15104</span><span class="hljs-number">-15129</span>/com.example.rxjavademo D/chan: ===================最终接收到的事件 A4B4
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">41</span>:<span class="hljs-number">30.860</span> <span class="hljs-number">15104</span><span class="hljs-number">-15129</span>/com.example.rxjavademo D/chan: ===================B 发送的事件 B5
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">11</span>:<span class="hljs-number">41</span>:<span class="hljs-number">30.861</span> <span class="hljs-number">15104</span><span class="hljs-number">-15129</span>/com.example.rxjavademo D/chan: ===================最终接收到的事件 A4B5
===================onComplete 
复制代码</code></pre>

<p>分析上述结果可以知道，当发送 A1 事件之后，因为 B 并没有发送任何事件，所以根本不会发生结合。当 B 发送了 B1 事件之后，就会与 A 最近发送的事件 A2 结合成 A2B1，这样只有后面一有被观察者发送事件，这个事件就会与其他被观察者最近发送的事件结合起来了。</p>
<p>因为 combineLatestDelayError() 就是多了延迟发送 onError() 功能，这里就不再赘述了。</p>
<h2 id="3-7-reduce"><a href="#3-7-reduce" class="headerlink" title="3.7 reduce()"></a>3.7 reduce()</h2><h4 id="方法预览：-26"><a href="#方法预览：-26" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs excel">public final Maybe&lt;<span class="hljs-built_in">T</span>&gt; reduce(BiFunction&lt;<span class="hljs-built_in">T</span>, <span class="hljs-built_in">T</span>, <span class="hljs-built_in">T</span>&gt; reducer)
复制代码</code></pre>

<h4 id="有什么用？-25"><a href="#有什么用？-25" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>与 scan() 操作符的作用也是将发送数据以一定逻辑聚合起来，这两个的区别在于 scan() 每处理一次数据就会将事件发送给观察者，而 reduce() 会将所有数据聚合在一起才会发送事件给观察者。</p>
<h4 id="怎么用？-25"><a href="#怎么用？-25" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.just(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
.reduce(<span class="hljs-literal">new</span> BiFunction &lt; <span class="hljs-built_in">Integer</span>, <span class="hljs-built_in">Integer</span>, <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">Integer</span> apply(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>, <span class="hljs-built_in">Integer</span> integer2) throws Exception &#123;
        int res = <span class="hljs-built_in">integer</span> + integer2;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================integer &quot;</span> + <span class="hljs-built_in">integer</span>);
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================integer2 &quot;</span> + integer2);
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================res &quot;</span> + res);
        <span class="hljs-keyword">return</span> res;
    &#125;
&#125;)
.subscribe(<span class="hljs-literal">new</span> Consumer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> accept(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================accept &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">14</span>:<span class="hljs-number">21</span>:<span class="hljs-number">46.042</span> <span class="hljs-number">17775</span><span class="hljs-number">-17775</span>/? D/chan: ====================<span class="hljs-built_in">int</span>eger <span class="hljs-number">0</span>
====================<span class="hljs-built_in">int</span>eger2 <span class="hljs-number">1</span>
====================res <span class="hljs-number">1</span>
====================<span class="hljs-built_in">int</span>eger <span class="hljs-number">1</span>
====================<span class="hljs-built_in">int</span>eger2 <span class="hljs-number">2</span>
====================res <span class="hljs-number">3</span>
====================<span class="hljs-built_in">int</span>eger <span class="hljs-number">3</span>
====================<span class="hljs-built_in">int</span>eger2 <span class="hljs-number">3</span>
====================res <span class="hljs-number">6</span>
==================accept <span class="hljs-number">6</span>
复制代码</code></pre>

<p>从结果可以看到，其实就是前2个数据聚合之后，然后再与后1个数据进行聚合，一直到没有数据为止。</p>
<h2 id="3-8-collect"><a href="#3-8-collect" class="headerlink" title="3.8 collect()"></a>3.8 collect()</h2><h4 id="方法预览：-27"><a href="#方法预览：-27" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs gradle"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> &lt;U&gt; Single&lt;U&gt; <span class="hljs-keyword">collect</span>(Callable&lt;? <span class="hljs-keyword">extends</span> U&gt; initialValueSupplier, BiConsumer&lt;? <span class="hljs-keyword">super</span> U, ? <span class="hljs-keyword">super</span> T&gt; collector)
复制代码</code></pre>

<h4 id="有什么用？-26"><a href="#有什么用？-26" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>将数据收集到数据结构当中。</p>
<h4 id="怎么用？-26"><a href="#怎么用？-26" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs pgsql">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
.collect(<span class="hljs-built_in">new</span> Callable &lt; ArrayList &lt; <span class="hljs-type">Integer</span> &gt;&gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> ArrayList &lt; <span class="hljs-type">Integer</span> &gt; <span class="hljs-keyword">call</span>() throws <span class="hljs-keyword">Exception</span> &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">new</span> ArrayList &lt; &gt; ();
    &#125;
&#125;,
<span class="hljs-built_in">new</span> BiConsumer &lt; ArrayList &lt; <span class="hljs-type">Integer</span> &gt; , <span class="hljs-type">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> accept(ArrayList &lt; <span class="hljs-type">Integer</span> &gt; integers, <span class="hljs-type">Integer</span> <span class="hljs-type">integer</span>) throws <span class="hljs-keyword">Exception</span> &#123;
        integers.<span class="hljs-keyword">add</span>(<span class="hljs-type">integer</span>);
    &#125;
&#125;)
.subscribe(<span class="hljs-built_in">new</span> Consumer &lt; ArrayList &lt; <span class="hljs-type">Integer</span> &gt;&gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> accept(ArrayList &lt; <span class="hljs-type">Integer</span> &gt; integers) throws <span class="hljs-keyword">Exception</span> &#123;
        <span class="hljs-keyword">Log</span>.d(TAG, &quot;===============accept &quot; + integers);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">16</span>:<span class="hljs-number">47</span>:<span class="hljs-number">18.257</span> <span class="hljs-number">31361</span><span class="hljs-number">-31361</span>/com.example.rxjavademo D/chan: ===============accept [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
复制代码</code></pre>

<h2 id="3-9-startWith-amp-startWithArray"><a href="#3-9-startWith-amp-startWithArray" class="headerlink" title="3.9 startWith() &amp; startWithArray()"></a>3.9 startWith() &amp; startWithArray()</h2><h4 id="方法预览：-28"><a href="#方法预览：-28" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs actionscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; startWith(T item)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; startWithArray(T... items)
复制代码</code></pre>

<h4 id="有什么用？-27"><a href="#有什么用？-27" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>在发送事件之前追加事件，startWith() 追加一个事件，startWithArray() 可以追加多个事件。追加的事件会先发出。</p>
<h4 id="怎么用？-27"><a href="#怎么用？-27" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs angelscript">Observable.just(<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>)
.startWithArray(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
.startWith(<span class="hljs-number">1</span>)
.subscribe(new Consumer &lt; Integer &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> accept(Integer <span class="hljs-built_in">int</span>eger) throws Exception &#123;
        Log.d(TAG, <span class="hljs-string">&quot;================accept &quot;</span> + <span class="hljs-built_in">int</span>eger);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">17</span>:<span class="hljs-number">08</span>:<span class="hljs-number">21.282</span> <span class="hljs-number">4505</span><span class="hljs-number">-4505</span>/com.example.rxjavademo D/chan: ================accept <span class="hljs-number">1</span>
================accept <span class="hljs-number">2</span>
================accept <span class="hljs-number">3</span>
================accept <span class="hljs-number">4</span>
================accept <span class="hljs-number">5</span>
================accept <span class="hljs-number">6</span>
================accept <span class="hljs-number">7</span>
复制代码</code></pre>

<h2 id="3-10-count"><a href="#3-10-count" class="headerlink" title="3.10 count()"></a>3.10 count()</h2><h4 id="方法预览：-29"><a href="#方法预览：-29" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs gradle"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Single&lt;<span class="hljs-keyword">Long</span>&gt; <span class="hljs-keyword">count</span>()
复制代码</code></pre>

<h4 id="有什么用？-28"><a href="#有什么用？-28" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>返回被观察者发送事件的数量。</p>
<h4 id="怎么用？-28"><a href="#怎么用？-28" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs gradle">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
.<span class="hljs-keyword">count</span>()
.subscribe(<span class="hljs-keyword">new</span> Consumer &lt; <span class="hljs-keyword">Long</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> accept(<span class="hljs-keyword">Long</span> aLong) <span class="hljs-keyword">throws</span> Exception &#123;
        Log.d(TAG, <span class="hljs-string">&quot;=======================aLong &quot;</span> + aLong);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">20</span>:<span class="hljs-number">41</span>:<span class="hljs-number">25.025</span> <span class="hljs-number">14126</span><span class="hljs-number">-14126</span>/? D/chan: =======================aLong <span class="hljs-number">3</span>
复制代码</code></pre>

<h1 id="4-功能操作符"><a href="#4-功能操作符" class="headerlink" title="4. 功能操作符"></a>4. 功能操作符</h1><h2 id="4-1-delay"><a href="#4-1-delay" class="headerlink" title="4.1 delay()"></a>4.1 delay()</h2><h4 id="方法预览：-30"><a href="#方法预览：-30" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> final Observable&lt;T&gt; <span class="hljs-title">delay</span>(<span class="hljs-params"><span class="hljs-built_in">long</span> delay, TimeUnit <span class="hljs-built_in">unit</span></span>)</span>
<span class="hljs-function">复制代码</span></code></pre>

<h4 id="有什么用？-29"><a href="#有什么用？-29" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>延迟一段事件发送事件。</p>
<h4 id="怎么用？-29"><a href="#怎么用？-29" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs typescript">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
.delay(<span class="hljs-number">2</span>, TimeUnit.SECONDS)
.subscribe(<span class="hljs-keyword">new</span> Observer &lt; Integer &gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onSubscribe</span>(<span class="hljs-params">Disposable d</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;=======================onSubscribe&quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onNext</span>(<span class="hljs-params">Integer integer</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;=======================onNext &quot;</span> + integer);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onError</span>(<span class="hljs-params">Throwable e</span>)</span> &#123;

    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onComplete</span>(<span class="hljs-params"></span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;=======================onSubscribe&quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>这里延迟了两秒才发送事件，来看看打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">20</span>:<span class="hljs-number">53</span>:<span class="hljs-number">43.618</span> <span class="hljs-number">16880</span><span class="hljs-number">-16880</span>/com.example.rxjavademo D/chan: =======================onSubscribe
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">20</span>:<span class="hljs-number">53</span>:<span class="hljs-number">45.620</span> <span class="hljs-number">16880</span><span class="hljs-number">-16906</span>/com.example.rxjavademo D/chan: =======================onNext <span class="hljs-number">1</span>
<span class="hljs-number">05</span><span class="hljs-number">-22</span> <span class="hljs-number">20</span>:<span class="hljs-number">53</span>:<span class="hljs-number">45.621</span> <span class="hljs-number">16880</span><span class="hljs-number">-16906</span>/com.example.rxjavademo D/chan: =======================onNext <span class="hljs-number">2</span>
=======================onNext <span class="hljs-number">3</span>
=======================onSubscribe
复制代码</code></pre>

<p>从打印结果可以看出 onSubscribe 回调2秒之后 onNext 才会回调。</p>
<h2 id="4-2-doOnEach"><a href="#4-2-doOnEach" class="headerlink" title="4.2 doOnEach()"></a>4.2 doOnEach()</h2><h4 id="方法预览：-31"><a href="#方法预览：-31" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs reasonml">public final Observable&lt;T&gt; <span class="hljs-keyword">do</span><span class="hljs-constructor">OnEach(<span class="hljs-params">final</span> Consumer&lt;? <span class="hljs-params">super</span> Notification&lt;T&gt;&gt; <span class="hljs-params">onNotification</span>)</span>
复制代码</code></pre>

<h4 id="有什么用？-30"><a href="#有什么用？-30" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>Observable 每发送一件事件之前都会先回调这个方法。</p>
<h4 id="怎么用？-30"><a href="#怎么用？-30" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.create(<span class="hljs-literal">new</span> ObservableOnSubscribe &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> subscribe(ObservableEmitter &lt; <span class="hljs-built_in">Integer</span> &gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        <span class="hljs-comment">//      e.onError(new NumberFormatException());</span>
        e.onComplete();
    &#125;
&#125;)
.doOnEach(<span class="hljs-literal">new</span> Consumer &lt; Notification &lt; <span class="hljs-built_in">Integer</span> &gt;&gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> accept(Notification &lt; <span class="hljs-built_in">Integer</span> &gt; integerNotification) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================doOnEach &quot;</span> + integerNotification.getValue());
    &#125;
&#125;)
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">09</span>:<span class="hljs-number">07</span>:<span class="hljs-number">05.547</span> <span class="hljs-number">19867</span><span class="hljs-number">-19867</span>/? D/chan: ==================onSubscribe 
==================doOnEach <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">1</span>
==================doOnEach <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">2</span>
==================doOnEach <span class="hljs-number">3</span>
==================onNext <span class="hljs-number">3</span>
==================doOnEach <span class="hljs-literal">null</span>
==================onComplete 
复制代码</code></pre>

<p>从结果就可以看出每发送一个事件之前都会回调 doOnEach 方法，并且可以取出 onNext() 发送的值。</p>
<h2 id="4-3-doOnNext"><a href="#4-3-doOnNext" class="headerlink" title="4.3 doOnNext()"></a>4.3 doOnNext()</h2><h4 id="方法预览：-32"><a href="#方法预览：-32" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs reasonml">public final Observable&lt;T&gt; <span class="hljs-keyword">do</span><span class="hljs-constructor">OnNext(Consumer&lt;? <span class="hljs-params">super</span> T&gt; <span class="hljs-params">onNext</span>)</span>
复制代码</code></pre>

<h4 id="有什么用？-31"><a href="#有什么用？-31" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>Observable 每发送 onNext() 之前都会先回调这个方法。</p>
<h4 id="怎么用？-31"><a href="#怎么用？-31" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.create(<span class="hljs-literal">new</span> ObservableOnSubscribe &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> subscribe(ObservableEmitter &lt; <span class="hljs-built_in">Integer</span> &gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onComplete();
    &#125;
&#125;)
.doOnNext(<span class="hljs-literal">new</span> Consumer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> accept(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================doOnNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;
&#125;)
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">09</span>:<span class="hljs-number">09</span>:<span class="hljs-number">36.769</span> <span class="hljs-number">20020</span><span class="hljs-number">-20020</span>/com.example.rxjavademo D/chan: ==================onSubscribe 
==================doOnNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">1</span>
==================doOnNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">2</span>
==================doOnNext <span class="hljs-number">3</span>
==================onNext <span class="hljs-number">3</span>
==================onComplete 
复制代码</code></pre>

<h2 id="4-4-doAfterNext"><a href="#4-4-doAfterNext" class="headerlink" title="4.4 doAfterNext()"></a>4.4 doAfterNext()</h2><h4 id="方法预览：-33"><a href="#方法预览：-33" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs reasonml">public final Observable&lt;T&gt; <span class="hljs-keyword">do</span><span class="hljs-constructor">AfterNext(Consumer&lt;? <span class="hljs-params">super</span> T&gt; <span class="hljs-params">onAfterNext</span>)</span>
复制代码</code></pre>

<h4 id="有什么用？-32"><a href="#有什么用？-32" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>Observable 每发送 onNext() 之后都会回调这个方法。</p>
<h4 id="怎么用？-32"><a href="#怎么用？-32" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.create(<span class="hljs-literal">new</span> ObservableOnSubscribe &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> subscribe(ObservableEmitter &lt; <span class="hljs-built_in">Integer</span> &gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onComplete();
    &#125;
&#125;)
.doAfterNext(<span class="hljs-literal">new</span> Consumer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> accept(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================doAfterNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;
&#125;)
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);

复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">09</span>:<span class="hljs-number">15</span>:<span class="hljs-number">49.215</span> <span class="hljs-number">20432</span><span class="hljs-number">-20432</span>/com.example.rxjavademo D/chan: ==================onSubscribe 
==================onNext <span class="hljs-number">1</span>
==================doAfterNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================doAfterNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
==================doAfterNext <span class="hljs-number">3</span>
==================onComplete 
复制代码</code></pre>

<h2 id="4-5-doOnComplete"><a href="#4-5-doOnComplete" class="headerlink" title="4.5 doOnComplete()"></a>4.5 doOnComplete()</h2><h4 id="方法预览：-34"><a href="#方法预览：-34" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs fortran"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; doOnComplete(<span class="hljs-keyword">Action</span> onComplete)
复制代码</code></pre>

<h4 id="有什么用？-33"><a href="#有什么用？-33" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>Observable 每发送 onComplete() 之前都会回调这个方法。</p>
<h4 id="怎么用？-33"><a href="#怎么用？-33" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.create(<span class="hljs-literal">new</span> ObservableOnSubscribe &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> subscribe(ObservableEmitter &lt; <span class="hljs-built_in">Integer</span> &gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onComplete();
    &#125;
&#125;)
.doOnComplete(<span class="hljs-literal">new</span> Action() &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> run() throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================doOnComplete &quot;</span>);
    &#125;
&#125;)
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">09</span>:<span class="hljs-number">32</span>:<span class="hljs-number">18.031</span> <span class="hljs-number">20751</span><span class="hljs-number">-20751</span>/? D/chan: ==================onSubscribe 
==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
==================doOnComplete 
==================onComplete 
复制代码</code></pre>

<h2 id="4-6-doOnError"><a href="#4-6-doOnError" class="headerlink" title="4.6 doOnError()"></a>4.6 doOnError()</h2><h4 id="方法预览：-35"><a href="#方法预览：-35" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; doOnError(Consumer<span class="hljs-meta">&lt;?</span> super <span class="hljs-built_in">Throwable</span>&gt; onError)
复制代码</code></pre>

<h4 id="有什么用？-34"><a href="#有什么用？-34" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>Observable 每发送 onError() 之前都会回调这个方法。</p>
<h4 id="怎么用？-34"><a href="#怎么用？-34" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.create(<span class="hljs-literal">new</span> ObservableOnSubscribe &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> subscribe(ObservableEmitter &lt; <span class="hljs-built_in">Integer</span> &gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onError(<span class="hljs-literal">new</span> NullPointerException());
    &#125;
&#125;)
.doOnError(<span class="hljs-literal">new</span> Consumer &lt; Throwable &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> accept(Throwable throwable) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================doOnError &quot;</span> + throwable);
    &#125;
&#125;)
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">09</span>:<span class="hljs-number">35</span>:<span class="hljs-number">04.150</span> <span class="hljs-number">21051</span><span class="hljs-number">-21051</span>/? D/chan: ==================onSubscribe 
==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
==================doOnError java.lang.NullPointerException
==================onError 

复制代码</code></pre>

<h2 id="4-7-doOnSubscribe"><a href="#4-7-doOnSubscribe" class="headerlink" title="4.7 doOnSubscribe()"></a>4.7 doOnSubscribe()</h2><h4 id="方法预览：-36"><a href="#方法预览：-36" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs reasonml">public final Observable&lt;T&gt; <span class="hljs-keyword">do</span><span class="hljs-constructor">OnSubscribe(Consumer&lt;? <span class="hljs-params">super</span> Disposable&gt; <span class="hljs-params">onSubscribe</span>)</span>
复制代码</code></pre>

<h4 id="有什么用？-35"><a href="#有什么用？-35" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>Observable 每发送 onSubscribe() 之前都会回调这个方法。</p>
<h4 id="怎么用？-35"><a href="#怎么用？-35" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.create(<span class="hljs-literal">new</span> ObservableOnSubscribe &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> subscribe(ObservableEmitter &lt; <span class="hljs-built_in">Integer</span> &gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onComplete();
    &#125;
&#125;)
.doOnSubscribe(<span class="hljs-literal">new</span> Consumer &lt; Disposable &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> accept(Disposable disposable) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================doOnSubscribe &quot;</span>);
    &#125;
&#125;)
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">09</span>:<span class="hljs-number">39</span>:<span class="hljs-number">25.778</span> <span class="hljs-number">21245</span><span class="hljs-number">-21245</span>/? D/chan: ==================doOnSubscribe 
==================onSubscribe 
==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
==================onComplete 
复制代码</code></pre>

<h2 id="4-8-doOnDispose"><a href="#4-8-doOnDispose" class="headerlink" title="4.8 doOnDispose()"></a>4.8 doOnDispose()</h2><h4 id="方法预览：-37"><a href="#方法预览：-37" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs fortran"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; doOnDispose(<span class="hljs-keyword">Action</span> onDispose)
复制代码</code></pre>

<h4 id="有什么用？-36"><a href="#有什么用？-36" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>当调用 Disposable 的 dispose() 之后回调该方法。</p>
<h4 id="怎么用？-36"><a href="#怎么用？-36" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs typescript">Observable.create(<span class="hljs-keyword">new</span> ObservableOnSubscribe &lt; Integer &gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onComplete();
    &#125;
&#125;)
.doOnDispose(<span class="hljs-keyword">new</span> <span class="hljs-function"><span class="hljs-title">Action</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> run() throws Exception &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================doOnDispose &quot;</span>);
    &#125;
&#125;)
.subscribe(<span class="hljs-keyword">new</span> Observer &lt; Integer &gt; () &#123;
    <span class="hljs-keyword">private</span> Disposable d;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onSubscribe</span>(<span class="hljs-params">Disposable d</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
        <span class="hljs-built_in">this</span>.d = d;
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onNext</span>(<span class="hljs-params">Integer integer</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onNext &quot;</span> + integer);
        d.dispose();
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onError</span>(<span class="hljs-params">Throwable e</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onComplete</span>(<span class="hljs-params"></span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">09</span>:<span class="hljs-number">55</span>:<span class="hljs-number">48.122</span> <span class="hljs-number">22023</span><span class="hljs-number">-22023</span>/com.example.rxjavademo D/chan: ==================onSubscribe 
==================onNext <span class="hljs-number">1</span>
==================doOnDispose 
复制代码</code></pre>

<h2 id="4-9-doOnLifecycle"><a href="#4-9-doOnLifecycle" class="headerlink" title="4.9 doOnLifecycle()"></a>4.9 doOnLifecycle()</h2><h4 id="方法预览：-38"><a href="#方法预览：-38" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs reasonml">public final Observable&lt;T&gt; <span class="hljs-keyword">do</span><span class="hljs-constructor">OnLifecycle(<span class="hljs-params">final</span> Consumer&lt;? <span class="hljs-params">super</span> Disposable&gt; <span class="hljs-params">onSubscribe</span>, <span class="hljs-params">final</span> Action <span class="hljs-params">onDispose</span>)</span>
复制代码</code></pre>

<h4 id="有什么用？-37"><a href="#有什么用？-37" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>在回调 onSubscribe 之前回调该方法的第一个参数的回调方法，可以使用该回调方法决定是否取消订阅。</p>
<h4 id="怎么用？-37"><a href="#怎么用？-37" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>doOnLifecycle() 第二个参数的回调方法的作用与 doOnDispose() 是一样的，现在用下面的例子来讲解：</p>
<pre><code class="hljs aspectj">Observable.create(<span class="hljs-keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">subscribe</span><span class="hljs-params">(ObservableEmitter&lt;Integer&gt; e)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onComplete();
    &#125;
&#125;)
.doOnLifecycle(<span class="hljs-keyword">new</span> Consumer&lt;Disposable&gt;() &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">accept</span><span class="hljs-params">(Disposable disposable)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================doOnLifecycle accept&quot;</span>);
    &#125;
&#125;, <span class="hljs-keyword">new</span> Action() &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================doOnLifecycle Action&quot;</span>);
    &#125;
&#125;)
.doOnDispose(
    <span class="hljs-keyword">new</span> Action() &#123;
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;
            Log.d(TAG, <span class="hljs-string">&quot;==================doOnDispose Action&quot;</span>);
        &#125;
&#125;)
.subscribe(<span class="hljs-keyword">new</span> Observer&lt;Integer&gt;() &#123;
    <span class="hljs-keyword">private</span> Disposable d;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onSubscribe</span><span class="hljs-params">(Disposable d)</span> </span>&#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
        <span class="hljs-keyword">this</span>.d = d;
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onNext</span><span class="hljs-params">(Integer integer)</span> </span>&#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onNext &quot;</span> + integer);
        d.dispose();
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onError</span><span class="hljs-params">(Throwable e)</span> </span>&#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onComplete</span><span class="hljs-params">()</span> </span>&#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
    
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">10</span>:<span class="hljs-number">20</span>:<span class="hljs-number">36.345</span> <span class="hljs-number">23922</span><span class="hljs-number">-23922</span>/? D/chan: ==================doOnLifecycle accept
==================onSubscribe 
==================onNext <span class="hljs-number">1</span>
==================doOnDispose Action
==================doOnLifecycle Action
复制代码</code></pre>

<p>可以看到当在 onNext() 方法进行取消订阅操作后，doOnDispose() 和 doOnLifecycle() 都会被回调。</p>
<p>如果使用 doOnLifecycle 进行取消订阅，来看看打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">10</span>:<span class="hljs-number">32</span>:<span class="hljs-number">20.014</span> <span class="hljs-number">24652</span><span class="hljs-number">-24652</span>/com.example.rxjavademo D/chan: ==================doOnLifecycle accept
==================onSubscribe 
复制代码</code></pre>

<p>可以发现 doOnDispose Action 和 doOnLifecycle Action 都没有被回调。</p>
<h2 id="4-10-doOnTerminate-amp-doAfterTerminate"><a href="#4-10-doOnTerminate-amp-doAfterTerminate" class="headerlink" title="4.10 doOnTerminate() &amp; doAfterTerminate()"></a>4.10 doOnTerminate() &amp; doAfterTerminate()</h2><h4 id="方法预览：-39"><a href="#方法预览：-39" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs fortran"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; doOnTerminate(<span class="hljs-keyword">final</span> <span class="hljs-keyword">Action</span> onTerminate)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; doAfterTerminate(<span class="hljs-keyword">Action</span> onFinally)
复制代码</code></pre>

<h4 id="有什么用？-38"><a href="#有什么用？-38" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>doOnTerminate 是在 onError 或者 onComplete 发送之前回调，而 doAfterTerminate 则是 onError 或者 onComplete 发送之后回调。</p>
<h4 id="怎么用？-38"><a href="#怎么用？-38" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.create(<span class="hljs-literal">new</span> ObservableOnSubscribe&lt;<span class="hljs-built_in">Integer</span>&gt;() &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> subscribe(ObservableEmitter&lt;<span class="hljs-built_in">Integer</span>&gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
<span class="hljs-comment">//      e.onError(new NullPointerException());</span>
        e.onComplete();
    &#125;
&#125;)
.doOnTerminate(<span class="hljs-literal">new</span> Action() &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> run() throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================doOnTerminate &quot;</span>);
    &#125;
&#125;)
.subscribe(<span class="hljs-literal">new</span> Observer&lt;<span class="hljs-built_in">Integer</span>&gt;() &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
    
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">39.503</span> <span class="hljs-number">22398</span><span class="hljs-number">-22398</span>/com.example.rxjavademo D/chan: ==================onSubscribe 
==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
<span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">39.504</span> <span class="hljs-number">22398</span><span class="hljs-number">-22398</span>/com.example.rxjavademo D/chan: ==================onNext <span class="hljs-number">3</span>
==================doOnTerminate 
==================onComplete 
复制代码</code></pre>

<p>doAfterTerminate 也是差不多，这里就不再赘述。</p>
<h2 id="4-11-doFinally"><a href="#4-11-doFinally" class="headerlink" title="4.11 doFinally()"></a>4.11 doFinally()</h2><h4 id="方法预览：-40"><a href="#方法预览：-40" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs fortran"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; doFinally(<span class="hljs-keyword">Action</span> onFinally)
复制代码</code></pre>

<h4 id="有什么用？-39"><a href="#有什么用？-39" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>在所有事件发送完毕之后回调该方法。</p>
<h4 id="怎么用？-39"><a href="#怎么用？-39" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>这里可能你会有个问题，那就是 doFinally() 和 doAfterTerminate() 到底有什么区别？区别就是在于取消订阅，如果取消订阅之后 doAfterTerminate() 就不会被回调，而 doFinally() 无论怎么样都会被回调，且都会在事件序列的最后。</p>
<p>现在用以下例子说明下：</p>
<pre><code class="hljs typescript">Observable.create(<span class="hljs-keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> subscribe(ObservableEmitter&lt;Integer&gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onComplete();
    &#125;
&#125;)
.doFinally(<span class="hljs-keyword">new</span> <span class="hljs-function"><span class="hljs-title">Action</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> run() throws Exception &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================doFinally &quot;</span>);
    &#125;
&#125;)
.doOnDispose(<span class="hljs-keyword">new</span> <span class="hljs-function"><span class="hljs-title">Action</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> run() throws Exception &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================doOnDispose &quot;</span>);
    &#125;
&#125;)
.doAfterTerminate(<span class="hljs-keyword">new</span> <span class="hljs-function"><span class="hljs-title">Action</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> run() throws Exception &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================doAfterTerminate &quot;</span>);
    &#125;
&#125;)
.subscribe(<span class="hljs-keyword">new</span> Observer&lt;Integer&gt;() &#123;
    <span class="hljs-keyword">private</span> Disposable d;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onSubscribe</span>(<span class="hljs-params">Disposable d</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
        <span class="hljs-built_in">this</span>.d = d;
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onNext</span>(<span class="hljs-params">Integer integer</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onNext &quot;</span> + integer);
        d.dispose();
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onError</span>(<span class="hljs-params">Throwable e</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onComplete</span>(<span class="hljs-params"></span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">10</span>:<span class="hljs-number">10</span>:<span class="hljs-number">10.469</span> <span class="hljs-number">23196</span><span class="hljs-number">-23196</span>/? D/chan: ==================onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">10</span>:<span class="hljs-number">10</span>:<span class="hljs-number">10.470</span> <span class="hljs-number">23196</span><span class="hljs-number">-23196</span>/? D/chan: ==================onNext <span class="hljs-number">1</span>
==================doOnDispose 
==================doFinally 
复制代码</code></pre>

<p>可以看到如果调用了 dispose() 方法，doAfterTerminate() 不会被回调。</p>
<p>现在试试把 dispose() 注释掉看看，看看打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">34.537</span> <span class="hljs-number">23439</span><span class="hljs-number">-23439</span>/com.example.rxjavademo D/chan: ==================onSubscribe 
==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
==================onComplete 
==================doAfterTerminate 
==================doFinally 
复制代码</code></pre>

<p>doAfterTerminate() 已经成功回调，doFinally() 还是会在事件序列的最后。</p>
<h2 id="4-12-onErrorReturn"><a href="#4-12-onErrorReturn" class="headerlink" title="4.12 onErrorReturn()"></a>4.12 onErrorReturn()</h2><h4 id="方法预览：-41"><a href="#方法预览：-41" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs fortran"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; onErrorReturn(<span class="hljs-function"><span class="hljs-keyword">Function</span></span>&lt;? super Throwable, ? <span class="hljs-keyword">extends</span> T&gt; valueSupplier)
复制代码</code></pre>

<h4 id="有什么用？-40"><a href="#有什么用？-40" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>当接受到一个 onError() 事件之后回调，返回的值会回调 onNext() 方法，并正常结束该事件序列。</p>
<h4 id="怎么用？-40"><a href="#怎么用？-40" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.create(<span class="hljs-literal">new</span> ObservableOnSubscribe&lt;<span class="hljs-built_in">Integer</span>&gt;() &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> subscribe(ObservableEmitter&lt;<span class="hljs-built_in">Integer</span>&gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onError(<span class="hljs-literal">new</span> NullPointerException());
    &#125;
&#125;)
.onErrorReturn(<span class="hljs-literal">new</span> Function&lt;Throwable, <span class="hljs-built_in">Integer</span>&gt;() &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">Integer</span> apply(Throwable throwable) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onErrorReturn &quot;</span> + throwable);
        <span class="hljs-keyword">return</span> <span class="hljs-number">404</span>;
    &#125;
&#125;)
.subscribe(<span class="hljs-literal">new</span> Observer&lt;<span class="hljs-built_in">Integer</span>&gt;() &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">18</span>:<span class="hljs-number">35</span>:<span class="hljs-number">18.175</span> <span class="hljs-number">19239</span><span class="hljs-number">-19239</span>/? D/chan: ==================onSubscribe 
==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
==================onErrorReturn java.lang.NullPointerException
==================onNext <span class="hljs-number">404</span>
==================onComplete 
复制代码</code></pre>

<h2 id="4-13-onErrorResumeNext"><a href="#4-13-onErrorResumeNext" class="headerlink" title="4.13 onErrorResumeNext()"></a>4.13 onErrorResumeNext()</h2><h4 id="方法预览：-42"><a href="#方法预览：-42" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs fortran"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; onErrorResumeNext(<span class="hljs-function"><span class="hljs-keyword">Function</span></span>&lt;? super Throwable, ? <span class="hljs-keyword">extends</span> ObservableSource&lt;? <span class="hljs-keyword">extends</span> T&gt;&gt; resumeFunction)
复制代码</code></pre>

<h4 id="有什么用？-41"><a href="#有什么用？-41" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>当接收到 onError() 事件时，返回一个新的 Observable，并正常结束事件序列。</p>
<h4 id="怎么用？-41"><a href="#怎么用？-41" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.create(<span class="hljs-literal">new</span> ObservableOnSubscribe&lt;<span class="hljs-built_in">Integer</span>&gt;() &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> subscribe(ObservableEmitter&lt;<span class="hljs-built_in">Integer</span>&gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onError(<span class="hljs-literal">new</span> NullPointerException());
    &#125;
&#125;)
.onErrorResumeNext(<span class="hljs-literal">new</span> Function&lt;Throwable, ObservableSource&lt;? extends <span class="hljs-built_in">Integer</span>&gt;&gt;() &#123;
    @Override
    <span class="hljs-keyword">public</span> ObservableSource&lt;? extends <span class="hljs-built_in">Integer</span>&gt; apply(Throwable throwable) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onErrorResumeNext &quot;</span> + throwable);
        <span class="hljs-keyword">return</span> Observable.just(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>);
    &#125;
&#125;)
.subscribe(<span class="hljs-literal">new</span> Observer&lt;<span class="hljs-built_in">Integer</span>&gt;() &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">18</span>:<span class="hljs-number">43</span>:<span class="hljs-number">10.910</span> <span class="hljs-number">26469</span><span class="hljs-number">-26469</span>/? D/chan: ==================onSubscribe 
==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
==================onErrorResumeNext java.lang.NullPointerException
==================onNext <span class="hljs-number">4</span>
==================onNext <span class="hljs-number">5</span>
==================onNext <span class="hljs-number">6</span>
==================onComplete 
复制代码</code></pre>

<h2 id="4-14-onExceptionResumeNext"><a href="#4-14-onExceptionResumeNext" class="headerlink" title="4.14 onExceptionResumeNext()"></a>4.14 onExceptionResumeNext()</h2><h4 id="方法预览：-43"><a href="#方法预览：-43" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs axapta"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; onExceptionResumeNext(<span class="hljs-keyword">final</span> ObservableSource&lt;? <span class="hljs-keyword">extends</span> T&gt; <span class="hljs-keyword">next</span>)
复制代码</code></pre>

<h4 id="有什么用？-42"><a href="#有什么用？-42" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>与 onErrorResumeNext() 作用基本一致，但是这个方法只能捕捉 Exception。</p>
<h4 id="怎么用？-42"><a href="#怎么用？-42" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>先来试试 onExceptionResumeNext() 是否能捕捉 Error。</p>
<pre><code class="hljs typescript">Observable.create(<span class="hljs-keyword">new</span> ObservableOnSubscribe&lt;Integer&gt;() &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> subscribe(ObservableEmitter&lt;Integer&gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onError(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&quot;404&quot;</span>));
    &#125;
&#125;)
.onExceptionResumeNext(<span class="hljs-keyword">new</span> Observable&lt;Integer&gt;() &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">subscribeActual</span>(<span class="hljs-params">Observer&lt;? <span class="hljs-built_in">super</span> Integer&gt; observer</span>)</span> &#123;
        observer.onNext(<span class="hljs-number">333</span>);
        observer.onComplete();
    &#125;
&#125;)
.subscribe(<span class="hljs-keyword">new</span> Observer&lt;Integer&gt;() &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onSubscribe</span>(<span class="hljs-params">Disposable d</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onNext</span>(<span class="hljs-params">Integer integer</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onNext &quot;</span> + integer);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onError</span>(<span class="hljs-params">Throwable e</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onComplete</span>(<span class="hljs-params"></span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">22</span>:<span class="hljs-number">23</span>:<span class="hljs-number">08.873</span> <span class="hljs-number">1062</span><span class="hljs-number">-1062</span>/com.example.louder.rxjavademo D/chan: ==================onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">22</span>:<span class="hljs-number">23</span>:<span class="hljs-number">08.874</span> <span class="hljs-number">1062</span><span class="hljs-number">-1062</span>/com.example.louder.rxjavademo D/chan: ==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
==================onError 
复制代码</code></pre>

<p>从打印结果可以知道，观察者收到 onError() 事件，证明 onErrorResumeNext() 不能捕捉 Error 事件。</p>
<p>将被观察者的 e.onError(new Error(“404”)) 改为 e.onError(new Exception(“404”))，现在看看是否能捕捉 Exception 事件：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">22</span>:<span class="hljs-number">32</span>:<span class="hljs-number">14.563</span> <span class="hljs-number">10487</span><span class="hljs-number">-10487</span>/com.example.louder.rxjavademo D/chan: ==================onSubscribe 
==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
==================onNext <span class="hljs-number">333</span>
==================onComplete 
复制代码</code></pre>

<p>从打印结果可以知道，这个方法成功捕获 Exception 事件。</p>
<h2 id="4-15-retry"><a href="#4-15-retry" class="headerlink" title="4.15 retry()"></a>4.15 retry()</h2><h4 id="方法预览：-44"><a href="#方法预览：-44" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs axapta"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; <span class="hljs-keyword">retry</span>(<span class="hljs-built_in">long</span> times)
......
复制代码</code></pre>

<h4 id="有什么用？-43"><a href="#有什么用？-43" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>如果出现错误事件，则会重新发送所有事件序列。times 是代表重新发的次数。</p>
<h4 id="怎么用？-43"><a href="#怎么用？-43" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.create(<span class="hljs-literal">new</span> ObservableOnSubscribe&lt;<span class="hljs-built_in">Integer</span>&gt;() &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> subscribe(ObservableEmitter&lt;<span class="hljs-built_in">Integer</span>&gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onError(<span class="hljs-literal">new</span> Exception(<span class="hljs-string">&quot;404&quot;</span>));
    &#125;
&#125;)
.retry(<span class="hljs-number">2</span>)
.subscribe(<span class="hljs-literal">new</span> Observer&lt;<span class="hljs-built_in">Integer</span>&gt;() &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">22</span>:<span class="hljs-number">46</span>:<span class="hljs-number">18.537</span> <span class="hljs-number">22239</span><span class="hljs-number">-22239</span>/com.example.louder.rxjavademo D/chan: ==================onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">22</span>:<span class="hljs-number">46</span>:<span class="hljs-number">18.538</span> <span class="hljs-number">22239</span><span class="hljs-number">-22239</span>/com.example.louder.rxjavademo D/chan: ==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
==================onError 
复制代码</code></pre>

<h2 id="4-16-retryUntil"><a href="#4-16-retryUntil" class="headerlink" title="4.16 retryUntil()"></a>4.16 retryUntil()</h2><h4 id="方法预览：-45"><a href="#方法预览：-45" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs fortran"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; retryUntil(<span class="hljs-keyword">final</span> BooleanSupplier <span class="hljs-keyword">stop</span>)
复制代码</code></pre>

<h4 id="有什么用？-44"><a href="#有什么用？-44" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>出现错误事件之后，可以通过此方法判断是否继续发送事件。</p>
<h4 id="怎么用？-44"><a href="#怎么用？-44" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs typescript">Observable.create(<span class="hljs-keyword">new</span> ObservableOnSubscribe &lt; Integer &gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onError(<span class="hljs-keyword">new</span> Exception(<span class="hljs-string">&quot;404&quot;</span>));
    &#125;
&#125;)
.retryUntil(<span class="hljs-keyword">new</span> <span class="hljs-function"><span class="hljs-title">BooleanSupplier</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> getAsBoolean() throws Exception &#123;
        <span class="hljs-keyword">if</span> (i == <span class="hljs-number">6</span>) &#123;
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        &#125;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    &#125;
&#125;)
.subscribe(<span class="hljs-keyword">new</span> Observer &lt; Integer &gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onSubscribe</span>(<span class="hljs-params">Disposable d</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onNext</span>(<span class="hljs-params">Integer integer</span>)</span> &#123;
        i += integer;
        Log.d(TAG, <span class="hljs-string">&quot;==================onNext &quot;</span> + integer);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onError</span>(<span class="hljs-params">Throwable e</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onComplete</span>(<span class="hljs-params"></span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">22</span>:<span class="hljs-number">57</span>:<span class="hljs-number">32.905</span> <span class="hljs-number">23063</span><span class="hljs-number">-23063</span>/com.example.louder.rxjavademo D/chan: ==================onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-23</span> <span class="hljs-number">22</span>:<span class="hljs-number">57</span>:<span class="hljs-number">32.906</span> <span class="hljs-number">23063</span><span class="hljs-number">-23063</span>/com.example.louder.rxjavademo D/chan: ==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
==================onError 

复制代码</code></pre>

<h2 id="4-17-retryWhen"><a href="#4-17-retryWhen" class="headerlink" title="4.17 retryWhen()"></a>4.17 retryWhen()</h2><h4 id="方法预览：-46"><a href="#方法预览：-46" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs actionscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> safeSubscribe(Observer&lt;? <span class="hljs-keyword">super</span> T&gt; s)
复制代码</code></pre>

<h4 id="有什么用？-45"><a href="#有什么用？-45" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>当被观察者接收到异常或者错误事件时会回调该方法，这个方法会返回一个新的被观察者。如果返回的被观察者发送 Error 事件则之前的被观察者不会继续发送事件，如果发送正常事件则之前的被观察者会继续不断重试发送事件。</p>
<h4 id="怎么用？-45"><a href="#怎么用？-45" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs php">Observable.create(<span class="hljs-keyword">new</span> ObservableOnSubscribe &lt; <span class="hljs-keyword">String</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> subscribe(ObservableEmitter &lt; <span class="hljs-keyword">String</span> &gt; e) throws <span class="hljs-built_in">Exception</span> &#123;
        e.onNext(<span class="hljs-string">&quot;chan&quot;</span>);
        e.onNext(<span class="hljs-string">&quot;ze&quot;</span>);
        e.onNext(<span class="hljs-string">&quot;de&quot;</span>);
        e.onError(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Exception</span>(<span class="hljs-string">&quot;404&quot;</span>));
        e.onNext(<span class="hljs-string">&quot;haha&quot;</span>);
    &#125;
&#125;)
.retryWhen(<span class="hljs-keyword">new</span> <span class="hljs-function"><span class="hljs-keyword">Function</span> &lt; <span class="hljs-title">Observable</span> &lt; <span class="hljs-title">Throwable</span> &gt; , <span class="hljs-title">ObservableSource</span> &lt;? &gt;&gt; (<span class="hljs-params"></span>) </span>&#123;
    @Override
    <span class="hljs-keyword">public</span> ObservableSource <span class="hljs-meta">&lt;?</span> &gt; apply(Observable &lt; <span class="hljs-built_in">Throwable</span> &gt; throwableObservable) throws <span class="hljs-built_in">Exception</span> &#123;
        <span class="hljs-keyword">return</span> throwableObservable.flatMap(<span class="hljs-keyword">new</span> <span class="hljs-function"><span class="hljs-keyword">Function</span> &lt; <span class="hljs-title">Throwable</span>, <span class="hljs-title">ObservableSource</span> &lt;? &gt;&gt; (<span class="hljs-params"></span>) </span>&#123;
            @Override
            <span class="hljs-keyword">public</span> ObservableSource <span class="hljs-meta">&lt;?</span> &gt; apply(<span class="hljs-built_in">Throwable</span> <span class="hljs-built_in">throwable</span>) throws <span class="hljs-built_in">Exception</span> &#123;
                <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">throwable</span>.toString().equals(<span class="hljs-string">&quot;java.lang.Exception: 404&quot;</span>)) &#123;
                    <span class="hljs-keyword">return</span> Observable.just(<span class="hljs-string">&quot;可以忽略的异常&quot;</span>);
                &#125; <span class="hljs-keyword">else</span> &#123;
                    <span class="hljs-keyword">return</span> Observable.<span class="hljs-built_in">error</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Throwable</span>(<span class="hljs-string">&quot;终止啦&quot;</span>));
                &#125;
            &#125;
        &#125;);
    &#125;
&#125;)
.subscribe(<span class="hljs-keyword">new</span> Observer &lt; <span class="hljs-keyword">String</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onSubscribe(Disposable d) &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onNext(<span class="hljs-keyword">String</span> s) &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onNext &quot;</span> + s);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onError(<span class="hljs-built_in">Throwable</span> e) &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onError &quot;</span> + e.toString());
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onComplete() &#123;
        Log.d(TAG, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">09</span>:<span class="hljs-number">13</span>:<span class="hljs-number">25.622</span> <span class="hljs-number">28372</span><span class="hljs-number">-28372</span>/com.example.rxjavademo D/chan: ==================onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">09</span>:<span class="hljs-number">13</span>:<span class="hljs-number">25.623</span> <span class="hljs-number">28372</span><span class="hljs-number">-28372</span>/com.example.rxjavademo D/chan: ==================onNext chan
==================onNext ze
==================onNext de
<span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">09</span>:<span class="hljs-number">13</span>:<span class="hljs-number">25.624</span> <span class="hljs-number">28372</span><span class="hljs-number">-28372</span>/com.example.rxjavademo D/chan: ==================onError java.lang.Throwable: 终止啦
复制代码</code></pre>

<p>将 onError(new Exception(“404”)) 改为 onError(new Exception(“303”)) 看看打印结果：</p>
<pre><code class="hljs diff"><span class="hljs-comment">==================onNext chan</span>
05-24 09:54:08.653 29694-29694/? D/chan: <span class="hljs-comment">==================onNext ze</span>
<span class="hljs-comment">==================onNext de</span>
<span class="hljs-comment">==================onNext chan</span>
<span class="hljs-comment">==================onNext ze</span>
<span class="hljs-comment">==================onNext de</span>
<span class="hljs-comment">==================onNext chan</span>
<span class="hljs-comment">==================onNext ze</span>
<span class="hljs-comment">==================onNext de</span>
<span class="hljs-comment">==================onNext chan</span>
<span class="hljs-comment">==================onNext ze</span>
<span class="hljs-comment">==================onNext de</span>
<span class="hljs-comment">==================onNext chan</span>
<span class="hljs-comment">==================onNext ze</span>
<span class="hljs-comment">==================onNext de</span>
<span class="hljs-comment">==================onNext chan</span>
......
复制代码</code></pre>

<p>从结果可以看出，会不断重复发送消息。</p>
<h2 id="4-18-repeat"><a href="#4-18-repeat" class="headerlink" title="4.18 repeat()"></a>4.18 repeat()</h2><h4 id="方法预览：-47"><a href="#方法预览：-47" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs gradle"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; repeat(<span class="hljs-keyword">long</span> <span class="hljs-keyword">times</span>)
......
复制代码</code></pre>

<h4 id="有什么用？-46"><a href="#有什么用？-46" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>重复发送被观察者的事件，times 为发送次数。</p>
<h4 id="怎么用？-46"><a href="#怎么用？-46" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs typescript">Observable.create(<span class="hljs-keyword">new</span> ObservableOnSubscribe &lt; Integer &gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onComplete();
    &#125;
&#125;)
.repeat(<span class="hljs-number">2</span>)
.subscribe(<span class="hljs-keyword">new</span> Observer &lt; Integer &gt; () &#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onSubscribe</span>(<span class="hljs-params">Disposable d</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;===================onSubscribe &quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onNext</span>(<span class="hljs-params">Integer integer</span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;===================onNext &quot;</span> + integer);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onError</span>(<span class="hljs-params">Throwable e</span>)</span> &#123;

    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-function"><span class="hljs-title">onComplete</span>(<span class="hljs-params"></span>)</span> &#123;
        Log.d(TAG, <span class="hljs-string">&quot;===================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">11</span>:<span class="hljs-number">33</span>:<span class="hljs-number">29.565</span> <span class="hljs-number">8544</span><span class="hljs-number">-8544</span>/com.example.rxjavademo D/chan: ===================onSubscribe 
===================onNext <span class="hljs-number">1</span>
===================onNext <span class="hljs-number">2</span>
===================onNext <span class="hljs-number">3</span>
===================onNext <span class="hljs-number">1</span>
===================onNext <span class="hljs-number">2</span>
===================onNext <span class="hljs-number">3</span>
<span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">11</span>:<span class="hljs-number">33</span>:<span class="hljs-number">29.565</span> <span class="hljs-number">8544</span><span class="hljs-number">-8544</span>/com.example.rxjavademo D/chan: ===================onComplete 
复制代码</code></pre>

<p>从结果可以看出，该事件发送了两次。</p>
<h2 id="4-19-repeatWhen"><a href="#4-19-repeatWhen" class="headerlink" title="4.19 repeatWhen()"></a>4.19 repeatWhen()</h2><h4 id="方法预览：-48"><a href="#方法预览：-48" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; repeatWhen(<span class="hljs-keyword">final</span> Function&lt;? <span class="hljs-keyword">super</span> Observable&lt;Object&gt;, ? <span class="hljs-keyword">extends</span> ObservableSource&lt;?&gt;&gt; <span class="hljs-keyword">handler</span>)
复制代码</code></pre>

<h4 id="有什么用？-47"><a href="#有什么用？-47" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>这个方法可以会返回一个新的被观察者设定一定逻辑来决定是否重复发送事件。</p>
<h4 id="怎么用？-47"><a href="#怎么用？-47" class="headerlink" title="怎么用？"></a>怎么用？</h4><p>这里分三种情况，如果新的被观察者返回 onComplete 或者 onError 事件，则旧的被观察者不会继续发送事件。如果被观察者返回其他事件，则会重复发送事件。</p>
<p>现在试验发送 onComplete 事件，代码如下：</p>
<pre><code class="hljs pgsql">Observable.<span class="hljs-keyword">create</span>(<span class="hljs-built_in">new</span> ObservableOnSubscribe &lt; <span class="hljs-type">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> subscribe(ObservableEmitter &lt; <span class="hljs-type">Integer</span> &gt; e) throws <span class="hljs-keyword">Exception</span> &#123;
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onComplete();
    &#125;
&#125;)
.repeatWhen(<span class="hljs-built_in">new</span> <span class="hljs-keyword">Function</span> &lt; Observable &lt; <span class="hljs-keyword">Object</span> &gt; , ObservableSource &lt;? &gt;&gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> ObservableSource &lt;? &gt; apply(Observable &lt; <span class="hljs-keyword">Object</span> &gt; objectObservable) throws <span class="hljs-keyword">Exception</span> &#123;
        <span class="hljs-keyword">return</span> Observable.empty();
    //  <span class="hljs-keyword">return</span> Observable.error(<span class="hljs-built_in">new</span> <span class="hljs-keyword">Exception</span>(&quot;404&quot;));
    //  <span class="hljs-keyword">return</span> Observable.just(<span class="hljs-number">4</span>); <span class="hljs-keyword">null</span>;
    &#125;
&#125;)
.subscribe(<span class="hljs-built_in">new</span> Observer &lt; <span class="hljs-type">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(TAG, &quot;===================onSubscribe &quot;);
    &#125;

    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> onNext(<span class="hljs-type">Integer</span> <span class="hljs-type">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(TAG, &quot;===================onNext &quot; + <span class="hljs-type">integer</span>);
    &#125;

    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(TAG, &quot;===================onError &quot;);
    &#125;

    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(TAG, &quot;===================onComplete &quot;);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">11</span>:<span class="hljs-number">44</span>:<span class="hljs-number">33.486</span> <span class="hljs-number">9379</span><span class="hljs-number">-9379</span>/com.example.rxjavademo D/chan: ===================onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">11</span>:<span class="hljs-number">44</span>:<span class="hljs-number">33.487</span> <span class="hljs-number">9379</span><span class="hljs-number">-9379</span>/com.example.rxjavademo D/chan: ===================onComplete 
复制代码</code></pre>

<p>下面直接看看发送 onError 事件和其他事件的打印结果。</p>
<p>发送 onError 打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">11</span>:<span class="hljs-number">46</span>:<span class="hljs-number">29.507</span> <span class="hljs-number">9561</span><span class="hljs-number">-9561</span>/com.example.rxjavademo D/chan: ===================onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">11</span>:<span class="hljs-number">46</span>:<span class="hljs-number">29.508</span> <span class="hljs-number">9561</span><span class="hljs-number">-9561</span>/com.example.rxjavademo D/chan: ===================onError 
复制代码</code></pre>

<p>发送其他事件的打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">11</span>:<span class="hljs-number">48</span>:<span class="hljs-number">35.844</span> <span class="hljs-number">9752</span><span class="hljs-number">-9752</span>/com.example.rxjavademo D/chan: ===================onSubscribe 
===================onNext <span class="hljs-number">1</span>
===================onNext <span class="hljs-number">2</span>
===================onNext <span class="hljs-number">3</span>
===================onComplete 
复制代码</code></pre>

<h2 id="4-20-subscribeOn"><a href="#4-20-subscribeOn" class="headerlink" title="4.20 subscribeOn()"></a>4.20 subscribeOn()</h2><h4 id="方法预览：-49"><a href="#方法预览：-49" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs actionscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; subscribeOn(Scheduler scheduler)
复制代码</code></pre>

<h4 id="有什么用？-48"><a href="#有什么用？-48" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>指定被观察者的线程，要注意的时，如果多次调用此方法，只有第一次有效。</p>
<h4 id="怎么用？-48"><a href="#怎么用？-48" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.create(<span class="hljs-literal">new</span> ObservableOnSubscribe &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> subscribe(ObservableEmitter &lt; <span class="hljs-built_in">Integer</span> &gt; e) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;=========================currentThread name: &quot;</span> + <span class="hljs-keyword">Thread</span>.currentThread().getName());
        e.onNext(<span class="hljs-number">1</span>);
        e.onNext(<span class="hljs-number">2</span>);
        e.onNext(<span class="hljs-number">3</span>);
        e.onComplete();
    &#125;
&#125;)
<span class="hljs-comment">//.subscribeOn(Schedulers.newThread())</span>
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;======================onSubscribe&quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;======================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;======================onError&quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;======================onComplete&quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>现在不调用 subscribeOn() 方法，来看看打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">40</span>:<span class="hljs-number">42.246</span> <span class="hljs-number">21466</span><span class="hljs-number">-21466</span>/? D/chan: ======================onSubscribe
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">40</span>:<span class="hljs-number">42.247</span> <span class="hljs-number">21466</span><span class="hljs-number">-21466</span>/? D/chan: =========================currentThread name: main
======================onNext <span class="hljs-number">1</span>
======================onNext <span class="hljs-number">2</span>
======================onNext <span class="hljs-number">3</span>
======================onComplete
复制代码</code></pre>

<p>可以看到打印被观察者的线程名字是主线程。</p>
<p>接着调用 subscribeOn(Schedulers.newThread()) 来看看打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">43</span>:<span class="hljs-number">26.964</span> <span class="hljs-number">22530</span><span class="hljs-number">-22530</span>/com.example.rxjavademo D/chan: ======================onSubscribe
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">43</span>:<span class="hljs-number">26.966</span> <span class="hljs-number">22530</span><span class="hljs-number">-22569</span>/com.example.rxjavademo D/chan: =========================currentThread name: RxNewThreadScheduler<span class="hljs-number">-1</span>
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">43</span>:<span class="hljs-number">26.967</span> <span class="hljs-number">22530</span><span class="hljs-number">-22569</span>/com.example.rxjavademo D/chan: ======================onNext <span class="hljs-number">1</span>
======================onNext <span class="hljs-number">2</span>
======================onNext <span class="hljs-number">3</span>
======================onComplete
复制代码</code></pre>

<p>可以看到打印结果被观察者是在一条新的线程。</p>
<p>现在看看多次调用会不会有效，代码如下：</p>
<pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Observable</span>.</span></span>create(<span class="hljs-keyword">new</span> ObservableOnSubscribe &lt; Integer &gt; <span class="hljs-literal">()</span> &#123;

    @Override
    public void subscribe(ObservableEmitter &lt; Integer &gt; e) throws Exception &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;=========================currentThread name: &quot;</span> + <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>current<span class="hljs-constructor">Thread()</span>.get<span class="hljs-constructor">Name()</span>);
        e.on<span class="hljs-constructor">Next(1)</span>;
        e.on<span class="hljs-constructor">Next(2)</span>;
        e.on<span class="hljs-constructor">Next(3)</span>;
        e.on<span class="hljs-constructor">Complete()</span>;
    &#125;
&#125;)
.subscribe<span class="hljs-constructor">On(Schedulers.<span class="hljs-params">computation</span>()</span>)
.subscribe<span class="hljs-constructor">On(Schedulers.<span class="hljs-params">newThread</span>()</span>)
.subscribe(<span class="hljs-keyword">new</span> Observer &lt; Integer &gt; <span class="hljs-literal">()</span> &#123;@Override
    public void on<span class="hljs-constructor">Subscribe(Disposable <span class="hljs-params">d</span>)</span> &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;======================onSubscribe&quot;</span>);
    &#125;

    @Override
    public void on<span class="hljs-constructor">Next(Integer <span class="hljs-params">integer</span>)</span> &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;======================onNext &quot;</span> + integer);
    &#125;

    @Override
    public void on<span class="hljs-constructor">Error(Throwable <span class="hljs-params">e</span>)</span> &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;======================onError&quot;</span>);
    &#125;

    @Override
    public void on<span class="hljs-constructor">Complete()</span> &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;======================onComplete&quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">47</span>:<span class="hljs-number">20.925</span> <span class="hljs-number">23590</span><span class="hljs-number">-23590</span>/com.example.rxjavademo D/chan: ======================onSubscribe
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">47</span>:<span class="hljs-number">20.930</span> <span class="hljs-number">23590</span><span class="hljs-number">-23629</span>/com.example.rxjavademo D/chan: =========================currentThread name: RxComputationThreadPool<span class="hljs-number">-1</span>
======================onNext <span class="hljs-number">1</span>
======================onNext <span class="hljs-number">2</span>
======================onNext <span class="hljs-number">3</span>
======================onComplete
复制代码</code></pre>

<p>可以看到第二次调动的 subscribeOn(Schedulers.newThread()) 并没有效果。</p>
<h2 id="4-21-observeOn"><a href="#4-21-observeOn" class="headerlink" title="4.21 observeOn()"></a>4.21 observeOn()</h2><h4 id="方法预览：-50"><a href="#方法预览：-50" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs actionscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; observeOn(Scheduler scheduler)
复制代码</code></pre>

<h4 id="有什么用？-49"><a href="#有什么用？-49" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>指定观察者的线程，每指定一次就会生效一次。</p>
<h4 id="怎么用？-49"><a href="#怎么用？-49" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Observable</span>.</span></span>just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
.observe<span class="hljs-constructor">On(Schedulers.<span class="hljs-params">newThread</span>()</span>)
.flat<span class="hljs-constructor">Map(<span class="hljs-params">new</span> Function &lt; Integer, ObservableSource &lt; String &gt;&gt; ()</span> &#123;
    @Override
    public ObservableSource &lt; String &gt; apply(Integer integer) throws Exception &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;======================flatMap Thread name &quot;</span> + <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>current<span class="hljs-constructor">Thread()</span>.get<span class="hljs-constructor">Name()</span>);
        return <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Observable</span>.</span></span>just(<span class="hljs-string">&quot;chan&quot;</span> + integer);
    &#125;
&#125;)
.observe<span class="hljs-constructor">On(AndroidSchedulers.<span class="hljs-params">mainThread</span>()</span>)
.subscribe(<span class="hljs-keyword">new</span> Observer &lt; String &gt; <span class="hljs-literal">()</span> &#123;
    @Override
    public void on<span class="hljs-constructor">Subscribe(Disposable <span class="hljs-params">d</span>)</span> &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;======================onSubscribe&quot;</span>);
    &#125;

    @Override
    public void on<span class="hljs-constructor">Next(String <span class="hljs-params">s</span>)</span> &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;======================onNext Thread name &quot;</span> + <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Thread</span>.</span></span>current<span class="hljs-constructor">Thread()</span>.get<span class="hljs-constructor">Name()</span>);
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;======================onNext &quot;</span> + s);
    &#125;

    @Override
    public void on<span class="hljs-constructor">Error(Throwable <span class="hljs-params">e</span>)</span> &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;======================onError&quot;</span>);
    &#125;

    @Override
    public void on<span class="hljs-constructor">Complete()</span> &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;======================onComplete&quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">58</span>:<span class="hljs-number">04.593</span> <span class="hljs-number">25717</span><span class="hljs-number">-25717</span>/com.example.rxjavademo D/chan: ======================onSubscribe
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">58</span>:<span class="hljs-number">04.594</span> <span class="hljs-number">25717</span><span class="hljs-number">-25753</span>/com.example.rxjavademo D/chan: ======================flatMap Thread name RxNewThreadScheduler<span class="hljs-number">-1</span>
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">58</span>:<span class="hljs-number">04.595</span> <span class="hljs-number">25717</span><span class="hljs-number">-25753</span>/com.example.rxjavademo D/chan: ======================flatMap Thread name RxNewThreadScheduler<span class="hljs-number">-1</span>
======================flatMap Thread name RxNewThreadScheduler<span class="hljs-number">-1</span>
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">58</span>:<span class="hljs-number">04.617</span> <span class="hljs-number">25717</span><span class="hljs-number">-25717</span>/com.example.rxjavademo D/chan: ======================onNext Thread name main
======================onNext chan1
======================onNext Thread name main
======================onNext chan2
======================onNext Thread name main
======================onNext chan3
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">58</span>:<span class="hljs-number">04.618</span> <span class="hljs-number">25717</span><span class="hljs-number">-25717</span>/com.example.rxjavademo D/chan: ======================onComplete
复制代码</code></pre>

<p>从打印结果可以知道，observeOn 成功切换了线程。</p>
<p>下表总结了 RxJava 中的调度器：</p>
<table>
<thead>
<tr>
<th>调度器</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>Schedulers.computation( )</td>
<td>用于使用计算任务，如事件循环和回调处理</td>
</tr>
<tr>
<td>Schedulers.immediate( )</td>
<td>当前线程</td>
</tr>
<tr>
<td>Schedulers.io( )</td>
<td>用于 IO 密集型任务，如果异步阻塞 IO 操作。</td>
</tr>
<tr>
<td>Schedulers.newThread( )</td>
<td>创建一个新的线程</td>
</tr>
<tr>
<td>AndroidSchedulers.mainThread()</td>
<td>Android 的 UI 线程，用于操作 UI。</td>
</tr>
</tbody></table>
<h1 id="5-过滤操作符"><a href="#5-过滤操作符" class="headerlink" title="5. 过滤操作符"></a>5. 过滤操作符</h1><h2 id="5-1-filter"><a href="#5-1-filter" class="headerlink" title="5.1 filter()"></a>5.1 filter()</h2><h4 id="方法预览：-51"><a href="#方法预览：-51" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs processing"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; <span class="hljs-built_in">filter</span>(Predicate&lt;? <span class="hljs-keyword">super</span> T&gt; predicate)
复制代码</code></pre>

<h4 id="有什么用？-50"><a href="#有什么用？-50" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>通过一定逻辑来过滤被观察者发送的事件，如果返回 true 则会发送事件，否则不会发送。</p>
<h4 id="怎么用？-50"><a href="#怎么用？-50" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso"> Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
    .filter(<span class="hljs-literal">new</span> Predicate &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
        @Override
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> test(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) throws Exception &#123;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">integer</span> &lt; <span class="hljs-number">2</span>;
        &#125;
&#125;)
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        i += <span class="hljs-built_in">integer</span>;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>以上代码只有小于2的事件才会发送，来看看打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">22</span>:<span class="hljs-number">57</span>:<span class="hljs-number">32.562</span> <span class="hljs-number">12776</span><span class="hljs-number">-12776</span>/com.example.louder.rxjavademo D/chan: ==================onSubscribe 
==================onNext <span class="hljs-number">1</span>
==================onComplete 
复制代码</code></pre>

<h2 id="5-2-ofType"><a href="#5-2-ofType" class="headerlink" title="5.2 ofType()"></a>5.2 ofType()</h2><h4 id="方法预览：-52"><a href="#方法预览：-52" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs monkey"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> &lt;U&gt; Observable&lt;U&gt; ofType(<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">Class</span>&lt;<span class="hljs-title">U</span>&gt; <span class="hljs-title">clazz</span>)</span>
复制代码</code></pre>

<h4 id="有什么用？-51"><a href="#有什么用？-51" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>可以过滤不符合该类型事件</p>
<h4 id="怎么用？-51"><a href="#怎么用？-51" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-string">&quot;chan&quot;</span>, <span class="hljs-string">&quot;zhide&quot;</span>)
.ofType(<span class="hljs-built_in">Integer</span>.class)
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        i += <span class="hljs-built_in">integer</span>;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">23</span>:<span class="hljs-number">04</span>:<span class="hljs-number">24.752</span> <span class="hljs-number">13229</span><span class="hljs-number">-13229</span>/? D/chan: ==================onSubscribe 
==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
<span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">23</span>:<span class="hljs-number">04</span>:<span class="hljs-number">24.753</span> <span class="hljs-number">13229</span><span class="hljs-number">-13229</span>/? D/chan: ==================onComplete 
复制代码</code></pre>

<h2 id="5-3-skip"><a href="#5-3-skip" class="headerlink" title="5.3 skip()"></a>5.3 skip()</h2><h4 id="方法预览：-53"><a href="#方法预览：-53" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs axapta"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; skip(<span class="hljs-built_in">long</span> <span class="hljs-keyword">count</span>)
.......
复制代码</code></pre>

<h4 id="有什么用？-52"><a href="#有什么用？-52" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>跳过正序某些事件，count 代表跳过事件的数量</p>
<h4 id="怎么用？-52"><a href="#怎么用？-52" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
.<span class="hljs-keyword">skip</span>(<span class="hljs-number">2</span>)
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        i += <span class="hljs-built_in">integer</span>;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">23</span>:<span class="hljs-number">13</span>:<span class="hljs-number">50.448</span> <span class="hljs-number">13831</span><span class="hljs-number">-13831</span>/? D/chan: ==================onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">23</span>:<span class="hljs-number">13</span>:<span class="hljs-number">50.449</span> <span class="hljs-number">13831</span><span class="hljs-number">-13831</span>/? D/chan: ==================onNext <span class="hljs-number">3</span>
==================onComplete 
复制代码</code></pre>

<p>skipLast() 作用也是跳过某些事件，不过它是用来跳过正序的后面的事件，这里就不再讲解了。</p>
<h2 id="5-4-distinct"><a href="#5-4-distinct" class="headerlink" title="5.4 distinct()"></a>5.4 distinct()</h2><h4 id="方法预览：-54"><a href="#方法预览：-54" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs oxygene"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; <span class="hljs-keyword">distinct</span>() 
复制代码</code></pre>

<h4 id="有什么用"><a href="#有什么用" class="headerlink" title="有什么用?"></a>有什么用?</h4><p>过滤事件序列中的重复事件。</p>
<h4 id="怎么用"><a href="#怎么用" class="headerlink" title="怎么用?"></a>怎么用?</h4><pre><code class="hljs lasso">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>)
.distinct()
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        i += <span class="hljs-built_in">integer</span>;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果:</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">23</span>:<span class="hljs-number">19</span>:<span class="hljs-number">44.334</span> <span class="hljs-number">14206</span><span class="hljs-number">-14206</span>/com.example.louder.rxjavademo D/chan: ==================onSubscribe 
==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
==================onComplete 
复制代码</code></pre>

<h2 id="5-5-distinctUntilChanged"><a href="#5-5-distinctUntilChanged" class="headerlink" title="5.5 distinctUntilChanged()"></a>5.5 distinctUntilChanged()</h2><h4 id="方法预览：-55"><a href="#方法预览：-55" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs actionscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; distinctUntilChanged()
复制代码</code></pre>

<h4 id="有什么用？-53"><a href="#有什么用？-53" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>过滤掉连续重复的事件</p>
<h4 id="怎么用-1"><a href="#怎么用-1" class="headerlink" title="怎么用?"></a>怎么用?</h4><pre><code class="hljs lasso">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>)
.distinctUntilChanged()
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        i += <span class="hljs-built_in">integer</span>;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果:</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">23</span>:<span class="hljs-number">22</span>:<span class="hljs-number">35.985</span> <span class="hljs-number">14424</span><span class="hljs-number">-14424</span>/com.example.louder.rxjavademo D/chan: ==================onSubscribe 
==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">1</span>
==================onComplete 
复制代码</code></pre>

<p>因为事件序列中连续出现两次3，所以第二次3并不会发出。</p>
<h2 id="5-6-take"><a href="#5-6-take" class="headerlink" title="5.6 take()"></a>5.6 take()</h2><h4 id="方法预览：-56"><a href="#方法预览：-56" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs axapta"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; take(<span class="hljs-built_in">long</span> <span class="hljs-keyword">count</span>)
......
复制代码</code></pre>

<h4 id="有什么用-1"><a href="#有什么用-1" class="headerlink" title="有什么用?"></a>有什么用?</h4><p>控制观察者接收的事件的数量。</p>
<h4 id="怎么用-2"><a href="#怎么用-2" class="headerlink" title="怎么用?"></a>怎么用?</h4><pre><code class="hljs lasso">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
.<span class="hljs-keyword">take</span>(<span class="hljs-number">3</span>)
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        i += <span class="hljs-built_in">integer</span>;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;==================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-24</span> <span class="hljs-number">23</span>:<span class="hljs-number">28</span>:<span class="hljs-number">32.899</span> <span class="hljs-number">14704</span><span class="hljs-number">-14704</span>/? D/chan: ==================onSubscribe 
==================onNext <span class="hljs-number">1</span>
==================onNext <span class="hljs-number">2</span>
==================onNext <span class="hljs-number">3</span>
==================onComplete 
复制代码</code></pre>

<p>takeLast() 的作用就是控制观察者只能接受事件序列的后面几件事情，这里就不再讲解了，大家可以自己试试。</p>
<h2 id="5-7-debounce"><a href="#5-7-debounce" class="headerlink" title="5.7 debounce()"></a>5.7 debounce()</h2><h4 id="方法预览：-57"><a href="#方法预览：-57" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> final Observable&lt;T&gt; <span class="hljs-title">debounce</span>(<span class="hljs-params"><span class="hljs-built_in">long</span> timeout, TimeUnit <span class="hljs-built_in">unit</span></span>)</span>
<span class="hljs-function">......</span>
<span class="hljs-function">复制代码</span></code></pre>

<h4 id="有什么用？-54"><a href="#有什么用？-54" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>如果两件事件发送的时间间隔小于设定的时间间隔则前一件事件就不会发送给观察者。</p>
<h4 id="怎么用？-53"><a href="#怎么用？-53" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.create(<span class="hljs-literal">new</span> ObservableOnSubscribe &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> subscribe(ObservableEmitter &lt; <span class="hljs-built_in">Integer</span> &gt; e) throws Exception &#123;
        e.onNext(<span class="hljs-number">1</span>);
        <span class="hljs-keyword">Thread</span>.sleep(<span class="hljs-number">900</span>);
        e.onNext(<span class="hljs-number">2</span>);
    &#125;
&#125;)
.debounce(<span class="hljs-number">1</span>, TimeUnit.SECONDS)
.subscribe(<span class="hljs-literal">new</span> Observer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onSubscribe(Disposable d) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;===================onSubscribe &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onNext(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;===================onNext &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onError(Throwable e) &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;===================onError &quot;</span>);
    &#125;

    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> onComplete() &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;===================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-25</span> <span class="hljs-number">20</span>:<span class="hljs-number">39</span>:<span class="hljs-number">10.512</span> <span class="hljs-number">17441</span><span class="hljs-number">-17441</span>/com.example.rxjavademo D/chan: ===================onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-25</span> <span class="hljs-number">20</span>:<span class="hljs-number">39</span>:<span class="hljs-number">12.413</span> <span class="hljs-number">17441</span><span class="hljs-number">-17478</span>/com.example.rxjavademo D/chan: ===================onNext <span class="hljs-number">2</span>
复制代码</code></pre>

<p>可以看到事件1并没有发送出去，现在将间隔时间改为1000，看看打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-25</span> <span class="hljs-number">20</span>:<span class="hljs-number">42</span>:<span class="hljs-number">10.874</span> <span class="hljs-number">18196</span><span class="hljs-number">-18196</span>/com.example.rxjavademo D/chan: ===================onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-25</span> <span class="hljs-number">20</span>:<span class="hljs-number">42</span>:<span class="hljs-number">11.875</span> <span class="hljs-number">18196</span><span class="hljs-number">-18245</span>/com.example.rxjavademo D/chan: ===================onNext <span class="hljs-number">1</span>
<span class="hljs-number">05</span><span class="hljs-number">-25</span> <span class="hljs-number">20</span>:<span class="hljs-number">42</span>:<span class="hljs-number">12.875</span> <span class="hljs-number">18196</span><span class="hljs-number">-18245</span>/com.example.rxjavademo D/chan: ===================onNext <span class="hljs-number">2</span>
复制代码</code></pre>

<p>throttleWithTimeout() 与此方法的作用一样，这里就不再赘述了。</p>
<h2 id="5-8-firstElement-amp-amp-lastElement"><a href="#5-8-firstElement-amp-amp-lastElement" class="headerlink" title="5.8 firstElement() &amp;&amp; lastElement()"></a>5.8 firstElement() &amp;&amp; lastElement()</h2><h5 id="方法预览：-58"><a href="#方法预览：-58" class="headerlink" title="方法预览："></a>方法预览：</h5><pre><code class="hljs actionscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Maybe&lt;T&gt; firstElement()
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Maybe&lt;T&gt; lastElement()
复制代码</code></pre>

<h4 id="有什么用？-55"><a href="#有什么用？-55" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>firstElement() 取事件序列的第一个元素，lastElement() 取事件序列的最后一个元素。</p>
<h4 id="怎么用？-54"><a href="#怎么用？-54" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
.firstElement()
.subscribe(<span class="hljs-literal">new</span> Consumer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> accept(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================firstElement &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;
&#125;);

Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
.lastElement()
.subscribe(<span class="hljs-literal">new</span> Consumer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> accept(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================lastElement &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-25</span> <span class="hljs-number">20</span>:<span class="hljs-number">47</span>:<span class="hljs-number">22.189</span> <span class="hljs-number">19909</span><span class="hljs-number">-19909</span>/? D/chan: ====================firstElement <span class="hljs-number">1</span>
====================lastElement <span class="hljs-number">4</span>
复制代码</code></pre>

<h2 id="5-9-elementAt-amp-elementAtOrError"><a href="#5-9-elementAt-amp-elementAtOrError" class="headerlink" title="5.9 elementAt() &amp; elementAtOrError()"></a>5.9 elementAt() &amp; elementAtOrError()</h2><h4 id="方法预览：-59"><a href="#方法预览：-59" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs axapta"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Maybe&lt;T&gt; elementAt(<span class="hljs-built_in">long</span> <span class="hljs-keyword">index</span>)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Single&lt;T&gt; elementAtOrError(<span class="hljs-built_in">long</span> <span class="hljs-keyword">index</span>)
复制代码</code></pre>

<h4 id="有什么用？-56"><a href="#有什么用？-56" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>elementAt() 可以指定取出事件序列中事件，但是输入的 index 超出事件序列的总数的话就不会出现任何结果。这种情况下，你想发出异常信息的话就用 elementAtOrError() 。</p>
<h4 id="怎么用？-55"><a href="#怎么用？-55" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
.elementAt(<span class="hljs-number">0</span>)
.subscribe(<span class="hljs-literal">new</span> Consumer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> accept(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================accept &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-25</span> <span class="hljs-number">20</span>:<span class="hljs-number">56</span>:<span class="hljs-number">22.266</span> <span class="hljs-number">23346</span><span class="hljs-number">-23346</span>/com.example.rxjavademo D/chan: ====================accept <span class="hljs-number">1</span>
复制代码</code></pre>

<p>将 elementAt() 的值改为5，这时是没有打印结果的，因为没有满足条件的元素。</p>
<p>替换 elementAt() 为 elementAtOrError()，代码如下：</p>
<pre><code class="hljs lasso">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
.elementAtOrError(<span class="hljs-number">5</span>)
.subscribe(<span class="hljs-literal">new</span> Consumer &lt; <span class="hljs-built_in">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> accept(<span class="hljs-built_in">Integer</span> <span class="hljs-built_in">integer</span>) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;====================accept &quot;</span> + <span class="hljs-built_in">integer</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs stylus">io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.exceptions</span>.OnErrorNotImplementedException
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.functions</span>.Functions<span class="hljs-variable">$OnErrorMissingConsumer</span>.accept(Functions<span class="hljs-selector-class">.java</span>: <span class="hljs-number">704</span>)
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.functions</span>.Functions<span class="hljs-variable">$OnErrorMissingConsumer</span>.accept(Functions<span class="hljs-selector-class">.java</span>: <span class="hljs-number">701</span>)
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.observers</span><span class="hljs-selector-class">.ConsumerSingleObserver</span>.onError(ConsumerSingleObserver<span class="hljs-selector-class">.java</span>: <span class="hljs-number">47</span>)
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.operators</span><span class="hljs-selector-class">.observable</span>.ObservableElementAtSingle<span class="hljs-variable">$ElementAtObserver</span>.onComplete(ObservableElementAtSingle<span class="hljs-selector-class">.java</span>: <span class="hljs-number">117</span>)
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.operators</span><span class="hljs-selector-class">.observable</span>.ObservableFromArray<span class="hljs-variable">$FromArrayDisposable</span>.run(ObservableFromArray<span class="hljs-selector-class">.java</span>: <span class="hljs-number">110</span>)
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.operators</span><span class="hljs-selector-class">.observable</span><span class="hljs-selector-class">.ObservableFromArray</span>.subscribeActual(ObservableFromArray<span class="hljs-selector-class">.java</span>: <span class="hljs-number">36</span>)
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.Observable</span>.subscribe(Observable<span class="hljs-selector-class">.java</span>: <span class="hljs-number">10903</span>)
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.operators</span><span class="hljs-selector-class">.observable</span><span class="hljs-selector-class">.ObservableElementAtSingle</span>.subscribeActual(ObservableElementAtSingle<span class="hljs-selector-class">.java</span>: <span class="hljs-number">37</span>)
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.Single</span>.subscribe(Single<span class="hljs-selector-class">.java</span>: <span class="hljs-number">2707</span>)
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.Single</span>.subscribe(Single<span class="hljs-selector-class">.java</span>: <span class="hljs-number">2693</span>)
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.Single</span>.subscribe(Single<span class="hljs-selector-class">.java</span>: <span class="hljs-number">2664</span>)
at com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.rxjavademo</span><span class="hljs-selector-class">.MainActivity</span>.onCreate(MainActivity<span class="hljs-selector-class">.java</span>: <span class="hljs-number">103</span>)
at android<span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.Activity</span>.performCreate(Activity<span class="hljs-selector-class">.java</span>: <span class="hljs-number">6942</span>)
at android<span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.Instrumentation</span>.callActivityOnCreate(Instrumentation<span class="hljs-selector-class">.java</span>: <span class="hljs-number">1126</span>)
at android<span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.ActivityThread</span>.performLaunchActivity(ActivityThread<span class="hljs-selector-class">.java</span>: <span class="hljs-number">2880</span>)
at android<span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.ActivityThread</span>.handleLaunchActivity(ActivityThread<span class="hljs-selector-class">.java</span>: <span class="hljs-number">2988</span>)
at android<span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.ActivityThread</span>. - wrap14(ActivityThread.java)
at android<span class="hljs-selector-class">.app</span>.ActivityThread<span class="hljs-variable">$H</span>.handleMessage(ActivityThread<span class="hljs-selector-class">.java</span>: <span class="hljs-number">1631</span>)
at android<span class="hljs-selector-class">.os</span><span class="hljs-selector-class">.Handler</span>.dispatchMessage(Handler<span class="hljs-selector-class">.java</span>: <span class="hljs-number">102</span>)
at android<span class="hljs-selector-class">.os</span><span class="hljs-selector-class">.Looper</span>.loop(Looper<span class="hljs-selector-class">.java</span>: <span class="hljs-number">154</span>)
at android<span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.ActivityThread</span>.main(ActivityThread<span class="hljs-selector-class">.java</span>: <span class="hljs-number">6682</span>)
at java<span class="hljs-selector-class">.lang</span><span class="hljs-selector-class">.reflect</span><span class="hljs-selector-class">.Method</span>.invoke(Native Method)
at com<span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.os</span>.ZygoteInit<span class="hljs-variable">$MethodAndArgsCaller</span>.run(ZygoteInit<span class="hljs-selector-class">.java</span>: <span class="hljs-number">1520</span>)
at com<span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.os</span><span class="hljs-selector-class">.ZygoteInit</span>.main(ZygoteInit<span class="hljs-selector-class">.java</span>: <span class="hljs-number">1410</span>)
Caused by: java<span class="hljs-selector-class">.util</span>.NoSuchElementException
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.operators</span><span class="hljs-selector-class">.observable</span>.ObservableElementAtSingle<span class="hljs-variable">$ElementAtObserver</span>.onComplete(ObservableElementAtSingle<span class="hljs-selector-class">.java</span>: <span class="hljs-number">117</span>) 
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.operators</span><span class="hljs-selector-class">.observable</span>.ObservableFromArray<span class="hljs-variable">$FromArrayDisposable</span>.run(ObservableFromArray<span class="hljs-selector-class">.java</span>: <span class="hljs-number">110</span>) 
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.operators</span><span class="hljs-selector-class">.observable</span><span class="hljs-selector-class">.ObservableFromArray</span>.subscribeActual(ObservableFromArray<span class="hljs-selector-class">.java</span>: <span class="hljs-number">36</span>) 
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.Observable</span>.subscribe(Observable<span class="hljs-selector-class">.java</span>: <span class="hljs-number">10903</span>) 
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.operators</span><span class="hljs-selector-class">.observable</span><span class="hljs-selector-class">.ObservableElementAtSingle</span>.subscribeActual(ObservableElementAtSingle<span class="hljs-selector-class">.java</span>: <span class="hljs-number">37</span>) 
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.Single</span>.subscribe(Single<span class="hljs-selector-class">.java</span>: <span class="hljs-number">2707</span>) 
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.Single</span>.subscribe(Single<span class="hljs-selector-class">.java</span>: <span class="hljs-number">2693</span>) 
at io<span class="hljs-selector-class">.reactivex</span><span class="hljs-selector-class">.Single</span>.subscribe(Single<span class="hljs-selector-class">.java</span>: <span class="hljs-number">2664</span>) 
at com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.rxjavademo</span><span class="hljs-selector-class">.MainActivity</span>.onCreate(MainActivity<span class="hljs-selector-class">.java</span>: <span class="hljs-number">103</span>) 
at android<span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.Activity</span>.performCreate(Activity<span class="hljs-selector-class">.java</span>: <span class="hljs-number">6942</span>) 
at android<span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.Instrumentation</span>.callActivityOnCreate(Instrumentation<span class="hljs-selector-class">.java</span>: <span class="hljs-number">1126</span>) 
at android<span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.ActivityThread</span>.performLaunchActivity(ActivityThread<span class="hljs-selector-class">.java</span>: <span class="hljs-number">2880</span>) 
at android<span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.ActivityThread</span>.handleLaunchActivity(ActivityThread<span class="hljs-selector-class">.java</span>: <span class="hljs-number">2988</span>) 
at android<span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.ActivityThread</span>. - wrap14(ActivityThread.java) 
at android<span class="hljs-selector-class">.app</span>.ActivityThread<span class="hljs-variable">$H</span>.handleMessage(ActivityThread<span class="hljs-selector-class">.java</span>: <span class="hljs-number">1631</span>) 
at android<span class="hljs-selector-class">.os</span><span class="hljs-selector-class">.Handler</span>.dispatchMessage(Handler<span class="hljs-selector-class">.java</span>: <span class="hljs-number">102</span>) 
at android<span class="hljs-selector-class">.os</span><span class="hljs-selector-class">.Looper</span>.loop(Looper<span class="hljs-selector-class">.java</span>: <span class="hljs-number">154</span>) 
at android<span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.ActivityThread</span>.main(ActivityThread<span class="hljs-selector-class">.java</span>: <span class="hljs-number">6682</span>) 
at java<span class="hljs-selector-class">.lang</span><span class="hljs-selector-class">.reflect</span><span class="hljs-selector-class">.Method</span>.invoke(Native Method) 
at com<span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.os</span>.ZygoteInit<span class="hljs-variable">$MethodAndArgsCaller</span>.run(ZygoteInit<span class="hljs-selector-class">.java</span>: <span class="hljs-number">1520</span>) 
at com<span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.os</span><span class="hljs-selector-class">.ZygoteInit</span>.main(ZygoteInit<span class="hljs-selector-class">.java</span>: <span class="hljs-number">1410</span>) 
复制代码</code></pre>

<p>这时候会抛出 NoSuchElementException 异常。</p>
<h1 id="6-条件操作符"><a href="#6-条件操作符" class="headerlink" title="6. 条件操作符"></a>6. 条件操作符</h1><h2 id="6-1-all"><a href="#6-1-all" class="headerlink" title="6.1 all()"></a>6.1 all()</h2><h4 id="方法预览：-60"><a href="#方法预览：-60" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; ambWith(ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt; other)
复制代码</code></pre>

<h4 id="有什么用？-57"><a href="#有什么用？-57" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>判断事件序列是否全部满足某个事件，如果都满足则返回 true，反之则返回 false。</p>
<h4 id="怎么用？-56"><a href="#怎么用？-56" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs pgsql">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
.<span class="hljs-keyword">all</span>(<span class="hljs-built_in">new</span> Predicate &lt; <span class="hljs-type">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">boolean</span> test(<span class="hljs-type">Integer</span> <span class="hljs-type">integer</span>) throws <span class="hljs-keyword">Exception</span> &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-type">integer</span> &lt; <span class="hljs-number">5</span>;
    &#125;
&#125;)
.subscribe(<span class="hljs-built_in">new</span> Consumer &lt; <span class="hljs-type">Boolean</span> &gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> accept(<span class="hljs-type">Boolean</span> aBoolean) throws <span class="hljs-keyword">Exception</span> &#123;
        <span class="hljs-keyword">Log</span>.d(TAG, &quot;==================aBoolean &quot; + aBoolean);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">09</span>:<span class="hljs-number">39</span>:<span class="hljs-number">51.644</span> <span class="hljs-number">1482</span><span class="hljs-number">-1482</span>/com.example.rxjavademo D/chan: ==================aBoolean <span class="hljs-literal">true</span>
复制代码</code></pre>

<h2 id="6-2-takeWhile"><a href="#6-2-takeWhile" class="headerlink" title="6.2 takeWhile()"></a>6.2 takeWhile()</h2><h4 id="方法预览：-61"><a href="#方法预览：-61" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs actionscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; takeWhile(Predicate&lt;? <span class="hljs-keyword">super</span> T&gt; predicate)
复制代码</code></pre>

<h4 id="有什么用？-58"><a href="#有什么用？-58" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>可以设置条件，当某个数据满足条件时就会发送该数据，反之则不发送。</p>
<h4 id="怎么用？-57"><a href="#怎么用？-57" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs pgsql">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
.takeWhile(<span class="hljs-built_in">new</span> Predicate &lt; <span class="hljs-type">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">boolean</span> test(<span class="hljs-type">Integer</span> <span class="hljs-type">integer</span>) throws <span class="hljs-keyword">Exception</span> &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-type">integer</span> &lt; <span class="hljs-number">3</span>;
    &#125;
&#125;)
.subscribe(<span class="hljs-built_in">new</span> Consumer &lt; <span class="hljs-type">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> accept(<span class="hljs-type">Integer</span> <span class="hljs-type">integer</span>) throws <span class="hljs-keyword">Exception</span> &#123;
        <span class="hljs-keyword">Log</span>.d(TAG, &quot;========================integer &quot; + <span class="hljs-type">integer</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">09</span>:<span class="hljs-number">43</span>:<span class="hljs-number">14.634</span> <span class="hljs-number">3648</span><span class="hljs-number">-3648</span>/com.example.rxjavademo D/chan: ========================<span class="hljs-built_in">int</span>eger <span class="hljs-number">1</span>
========================<span class="hljs-built_in">int</span>eger <span class="hljs-number">2</span>
复制代码</code></pre>

<h2 id="6-3-skipWhile"><a href="#6-3-skipWhile" class="headerlink" title="6.3 skipWhile()"></a>6.3 skipWhile()</h2><h4 id="方法预览：-62"><a href="#方法预览：-62" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs actionscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; skipWhile(Predicate&lt;? <span class="hljs-keyword">super</span> T&gt; predicate)
复制代码</code></pre>

<h4 id="有什么用？-59"><a href="#有什么用？-59" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>可以设置条件，当某个数据满足条件时不发送该数据，反之则发送。</p>
<h4 id="怎么用？-58"><a href="#怎么用？-58" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs pgsql">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)
.skipWhile(<span class="hljs-built_in">new</span> Predicate &lt; <span class="hljs-type">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">boolean</span> test(<span class="hljs-type">Integer</span> <span class="hljs-type">integer</span>) throws <span class="hljs-keyword">Exception</span> &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-type">integer</span> &lt; <span class="hljs-number">3</span>;
    &#125;
&#125;)
.subscribe(<span class="hljs-built_in">new</span> Consumer &lt; <span class="hljs-type">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> accept(<span class="hljs-type">Integer</span> <span class="hljs-type">integer</span>) throws <span class="hljs-keyword">Exception</span> &#123;
        <span class="hljs-keyword">Log</span>.d(TAG, &quot;========================integer &quot; + <span class="hljs-type">integer</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">32.653</span> <span class="hljs-number">4861</span><span class="hljs-number">-4861</span>/com.example.rxjavademo D/chan: ========================<span class="hljs-built_in">int</span>eger <span class="hljs-number">3</span>
========================<span class="hljs-built_in">int</span>eger <span class="hljs-number">4</span>
复制代码</code></pre>

<h2 id="6-4-takeUntil"><a href="#6-4-takeUntil" class="headerlink" title="6.4 takeUntil()"></a>6.4 takeUntil()</h2><h4 id="方法预览：-63"><a href="#方法预览：-63" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs actionscript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Observable&lt;T&gt; takeUntil(Predicate&lt;? <span class="hljs-keyword">super</span> T&gt; stopPredicate
复制代码</code></pre>

<h4 id="有什么用？-60"><a href="#有什么用？-60" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>可以设置条件，当事件满足此条件时，下一次的事件就不会被发送了。</p>
<h4 id="怎么用？-59"><a href="#怎么用？-59" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs pgsql">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)
.takeUntil(<span class="hljs-built_in">new</span> Predicate &lt; <span class="hljs-type">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">boolean</span> test(<span class="hljs-type">Integer</span> <span class="hljs-type">integer</span>) throws <span class="hljs-keyword">Exception</span> &#123;
        <span class="hljs-keyword">return</span> <span class="hljs-type">integer</span> &gt; <span class="hljs-number">3</span>;
    &#125;
&#125;)
.subscribe(<span class="hljs-built_in">new</span> Consumer &lt; <span class="hljs-type">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> accept(<span class="hljs-type">Integer</span> <span class="hljs-type">integer</span>) throws <span class="hljs-keyword">Exception</span> &#123;
        <span class="hljs-keyword">Log</span>.d(TAG, &quot;========================integer &quot; + <span class="hljs-type">integer</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">09</span>:<span class="hljs-number">55</span>:<span class="hljs-number">12.918</span> <span class="hljs-number">7933</span><span class="hljs-number">-7933</span>/com.example.rxjavademo D/chan: ========================<span class="hljs-built_in">int</span>eger <span class="hljs-number">1</span>
========================<span class="hljs-built_in">int</span>eger <span class="hljs-number">2</span>
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">09</span>:<span class="hljs-number">55</span>:<span class="hljs-number">12.919</span> <span class="hljs-number">7933</span><span class="hljs-number">-7933</span>/com.example.rxjavademo D/chan: ========================<span class="hljs-built_in">int</span>eger <span class="hljs-number">3</span>
========================<span class="hljs-built_in">int</span>eger <span class="hljs-number">4</span>
复制代码</code></pre>

<h2 id="6-5-skipUntil"><a href="#6-5-skipUntil" class="headerlink" title="6.5 skipUntil()"></a>6.5 skipUntil()</h2><h4 id="方法预览：-64"><a href="#方法预览：-64" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs pf">public final <span class="hljs-variable">&lt;U&gt;</span> Observable<span class="hljs-variable">&lt;T&gt;</span> <span class="hljs-keyword">skip</span>Until(ObservableSource<span class="hljs-variable">&lt;U&gt;</span> other)
复制代码</code></pre>

<h4 id="有什么用？-61"><a href="#有什么用？-61" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>当 skipUntil() 中的 Observable 发送事件了，原来的 Observable 才会发送事件给观察者。</p>
<h4 id="怎么用？-60"><a href="#怎么用？-60" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Observable</span>.</span></span>interval<span class="hljs-constructor">Range(1, 5, 0, 1, TimeUnit.SECONDS)</span>
.skip<span class="hljs-constructor">Until(Observable.<span class="hljs-params">intervalRange</span>(6, 5, 3, 1, TimeUnit.SECONDS)</span>)
.subscribe(<span class="hljs-keyword">new</span> Observer &lt; Long &gt; <span class="hljs-literal">()</span> &#123;
    @Override
    public void on<span class="hljs-constructor">Subscribe(Disposable <span class="hljs-params">d</span>)</span> &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;========================onSubscribe &quot;</span>);
    &#125;

    @Override
    public void on<span class="hljs-constructor">Next(Long <span class="hljs-params">along</span>)</span> &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;========================onNext &quot;</span> + along);
    &#125;

    @Override
    public void on<span class="hljs-constructor">Error(Throwable <span class="hljs-params">e</span>)</span> &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;========================onError &quot;</span>);
    &#125;

    @Override
    public void on<span class="hljs-constructor">Complete()</span> &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;========================onComplete &quot;</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">08</span>:<span class="hljs-number">50.574</span> <span class="hljs-number">13023</span><span class="hljs-number">-13023</span>/com.example.rxjavademo D/chan: ========================onSubscribe 
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">08</span>:<span class="hljs-number">53.576</span> <span class="hljs-number">13023</span><span class="hljs-number">-13054</span>/com.example.rxjavademo D/chan: ========================onNext <span class="hljs-number">4</span>
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">08</span>:<span class="hljs-number">54.576</span> <span class="hljs-number">13023</span><span class="hljs-number">-13054</span>/com.example.rxjavademo D/chan: ========================onNext <span class="hljs-number">5</span>
========================onComplete 
复制代码</code></pre>

<p>从结果可以看出，skipUntil() 里的 Observable 并不会发送事件给观察者。</p>
<h2 id="6-6-sequenceEqual"><a href="#6-6-sequenceEqual" class="headerlink" title="6.6 sequenceEqual()"></a>6.6 sequenceEqual()</h2><h4 id="方法预览：-65"><a href="#方法预览：-65" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> &lt;T&gt; Single&lt;<span class="hljs-keyword">Boolean</span>&gt; sequenceEqual(ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt; source1, ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt; source2)
......
复制代码</code></pre>

<h4 id="有什么用？-62"><a href="#有什么用？-62" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>判断两个 Observable 发送的事件是否相同。</p>
<h4 id="怎么用？-61"><a href="#怎么用？-61" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Observable</span>.</span></span>sequence<span class="hljs-constructor">Equal(Observable.<span class="hljs-params">just</span>(1, 2, 3)</span>,
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Observable</span>.</span></span>just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>))
.subscribe(<span class="hljs-keyword">new</span> Consumer &lt; Boolean &gt; <span class="hljs-literal">()</span> &#123;
    @Override
    public void accept(Boolean aBoolean) throws Exception &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;========================onNext &quot;</span> + aBoolean);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">11</span>:<span class="hljs-number">45.975</span> <span class="hljs-number">14157</span><span class="hljs-number">-14157</span>/? D/chan: ========================onNext <span class="hljs-literal">true</span>
复制代码</code></pre>

<h2 id="6-7-contains"><a href="#6-7-contains" class="headerlink" title="6.7 contains()"></a>6.7 contains()</h2><h4 id="方法预览：-66"><a href="#方法预览：-66" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Single&lt;<span class="hljs-keyword">Boolean</span>&gt; contains(<span class="hljs-keyword">final</span> <span class="hljs-keyword">Object</span> element)
复制代码</code></pre>

<h4 id="有什么用？-63"><a href="#有什么用？-63" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>判断事件序列中是否含有某个元素，如果有则返回 true，如果没有则返回 false。</p>
<h4 id="怎么用？-62"><a href="#怎么用？-62" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs lasso">Observable.just(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
.contains(<span class="hljs-number">3</span>)
.subscribe(<span class="hljs-literal">new</span> Consumer &lt; <span class="hljs-built_in">Boolean</span> &gt; () &#123;
    @Override
    <span class="hljs-keyword">public</span> <span class="hljs-literal">void</span> accept(<span class="hljs-built_in">Boolean</span> aBoolean) throws Exception &#123;
        <span class="hljs-keyword">Log</span>.d(<span class="hljs-built_in">TAG</span>, <span class="hljs-string">&quot;========================onNext &quot;</span> + aBoolean);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">14</span>:<span class="hljs-number">23.522</span> <span class="hljs-number">15085</span><span class="hljs-number">-15085</span>/com.example.rxjavademo D/chan: ========================onNext <span class="hljs-literal">true</span>
复制代码</code></pre>

<h2 id="6-8-isEmpty"><a href="#6-8-isEmpty" class="headerlink" title="6.8 isEmpty()"></a>6.8 isEmpty()</h2><h4 id="方法预览：-67"><a href="#方法预览：-67" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs gradle"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Single&lt;<span class="hljs-keyword">Boolean</span>&gt; isEmpty()
复制代码</code></pre>

<h4 id="有什么用？-64"><a href="#有什么用？-64" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>判断事件序列是否为空。</p>
<h4 id="怎么用？-63"><a href="#怎么用？-63" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs pgsql">Observable.<span class="hljs-keyword">create</span>(<span class="hljs-built_in">new</span> ObservableOnSubscribe &lt; <span class="hljs-type">Integer</span> &gt; () &#123;

    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> subscribe(ObservableEmitter &lt; <span class="hljs-type">Integer</span> &gt; e) throws <span class="hljs-keyword">Exception</span> &#123;
        e.onComplete();
    &#125;
&#125;)
.isEmpty()
.subscribe(<span class="hljs-built_in">new</span> Consumer &lt; <span class="hljs-type">Boolean</span> &gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> accept(<span class="hljs-type">Boolean</span> aBoolean) throws <span class="hljs-keyword">Exception</span> &#123;
        <span class="hljs-keyword">Log</span>.d(TAG, &quot;========================onNext &quot; + aBoolean);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">17</span>:<span class="hljs-number">16.725</span> <span class="hljs-number">16109</span><span class="hljs-number">-16109</span>/com.example.rxjavademo D/chan: ========================onNext <span class="hljs-literal">true</span>
复制代码</code></pre>

<h2 id="6-9-amb"><a href="#6-9-amb" class="headerlink" title="6.9 amb()"></a>6.9 amb()</h2><h4 id="方法预览：-68"><a href="#方法预览：-68" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> &lt;T&gt; Observable&lt;T&gt; amb(<span class="hljs-keyword">Iterable</span><span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> ObservableSource<span class="hljs-meta">&lt;?</span> <span class="hljs-keyword">extends</span> T&gt;&gt; sources)
复制代码</code></pre>

<h4 id="有什么用？-65"><a href="#有什么用？-65" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>amb() 要传入一个 Observable 集合，但是只会发送最先发送事件的 Observable 中的事件，其余 Observable 将会被丢弃。</p>
<h4 id="怎么用？-64"><a href="#怎么用？-64" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs reasonml">ArrayList &lt; Observable &lt; Long &gt;&gt; <span class="hljs-built_in">list</span> = <span class="hljs-keyword">new</span> ArrayList &lt; &gt; <span class="hljs-literal">()</span>;

<span class="hljs-built_in">list</span>.add(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Observable</span>.</span></span>interval<span class="hljs-constructor">Range(1, 5, 2, 1, TimeUnit.SECONDS)</span>);
<span class="hljs-built_in">list</span>.add(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Observable</span>.</span></span>interval<span class="hljs-constructor">Range(6, 5, 0, 1, TimeUnit.SECONDS)</span>);

<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Observable</span>.</span></span>amb(<span class="hljs-built_in">list</span>)
.subscribe(<span class="hljs-keyword">new</span> Consumer &lt; Long &gt; <span class="hljs-literal">()</span> &#123;
    @Override
    public void accept(Long aLong) throws Exception &#123;
        <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Log</span>.</span></span>d(TAG, <span class="hljs-string">&quot;========================aLong &quot;</span> + aLong);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">21</span>:<span class="hljs-number">29.580</span> <span class="hljs-number">17185</span><span class="hljs-number">-17219</span>/com.example.rxjavademo D/chan: ========================aLong <span class="hljs-number">6</span>
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">21</span>:<span class="hljs-number">30.580</span> <span class="hljs-number">17185</span><span class="hljs-number">-17219</span>/com.example.rxjavademo D/chan: ========================aLong <span class="hljs-number">7</span>
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">21</span>:<span class="hljs-number">31.579</span> <span class="hljs-number">17185</span><span class="hljs-number">-17219</span>/com.example.rxjavademo D/chan: ========================aLong <span class="hljs-number">8</span>
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">21</span>:<span class="hljs-number">32.579</span> <span class="hljs-number">17185</span><span class="hljs-number">-17219</span>/com.example.rxjavademo D/chan: ========================aLong <span class="hljs-number">9</span>
<span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">21</span>:<span class="hljs-number">33.579</span> <span class="hljs-number">17185</span><span class="hljs-number">-17219</span>/com.example.rxjavademo D/chan: ========================aLong <span class="hljs-number">10</span>
复制代码</code></pre>

<h2 id="6-10-defaultIfEmpty"><a href="#6-10-defaultIfEmpty" class="headerlink" title="6.10 defaultIfEmpty()"></a>6.10 defaultIfEmpty()</h2><h4 id="方法预览：-69"><a href="#方法预览：-69" class="headerlink" title="方法预览："></a>方法预览：</h4><pre><code class="hljs pf">public final Observable<span class="hljs-variable">&lt;T&gt;</span> <span class="hljs-keyword">default</span>IfEmpty(T <span class="hljs-keyword">default</span>Item)
复制代码</code></pre>

<h4 id="有什么用？-66"><a href="#有什么用？-66" class="headerlink" title="有什么用？"></a>有什么用？</h4><p>如果观察者只发送一个 onComplete() 事件，则可以利用这个方法发送一个值。</p>
<h4 id="怎么用？-65"><a href="#怎么用？-65" class="headerlink" title="怎么用？"></a>怎么用？</h4><pre><code class="hljs pgsql">Observable.<span class="hljs-keyword">create</span>(<span class="hljs-built_in">new</span> ObservableOnSubscribe &lt; <span class="hljs-type">Integer</span> &gt; () &#123;

    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> subscribe(ObservableEmitter &lt; <span class="hljs-type">Integer</span> &gt; e) throws <span class="hljs-keyword">Exception</span> &#123;
        e.onComplete();
    &#125;
&#125;)
.defaultIfEmpty(<span class="hljs-number">666</span>)
.subscribe(<span class="hljs-built_in">new</span> Consumer &lt; <span class="hljs-type">Integer</span> &gt; () &#123;
    @Override
    <span class="hljs-built_in">public</span> <span class="hljs-type">void</span> accept(<span class="hljs-type">Integer</span> <span class="hljs-type">integer</span>) throws <span class="hljs-keyword">Exception</span> &#123;
        <span class="hljs-keyword">Log</span>.d(TAG, &quot;========================onNext &quot; + <span class="hljs-type">integer</span>);
    &#125;
&#125;);
复制代码</code></pre>

<p>打印结果：</p>
<pre><code class="hljs angelscript"><span class="hljs-number">05</span><span class="hljs-number">-26</span> <span class="hljs-number">10</span>:<span class="hljs-number">26</span>:<span class="hljs-number">56.376</span> <span class="hljs-number">19249</span><span class="hljs-number">-19249</span>/com.example.rxjavademo D/chan: ========================onNext <span class="hljs-number">666</span>
复制代码</code></pre>

<p>转自 <a href="">掘金：RxJava2 只看这一篇文章就够了-玉刚说</a></p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/Blog/categories/RxJava/">RxJava</a>
                    
                  </div>
                
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/Blog/2020/11/23/Android%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%B8%80%E5%88%87/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Android多线程的一切</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/Blog/2020/11/20/Activity%E7%9A%84%E5%88%9D%E7%BA%A7%EF%BC%8C%E4%B8%AD%E7%BA%A7%EF%BC%8C%E9%AB%98%E7%BA%A7%E9%97%AE%E6%B3%95/">
                        <span class="hidden-mobile">Activity的初级，中级，高级问法</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>安卓学弟 </span></a> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>ZEKI</span></a> 
  </div>
  

  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":200})
    NProgress.start()
    document.addEventListener('DOMContentLoaded', function() {
      window.NProgress && window.NProgress.inc();
    })
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/js/bootstrap.min.js" ></script>
<script  src="/Blog/js/debouncer.js" ></script>
<script  src="/Blog/js/events.js" ></script>
<script  src="/Blog/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/Blog/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.staticfile.org/tocbot/4.12.0/tocbot.min.js" ></script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>





  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/Blog/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/Blog/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/Blog/js/boot.js" ></script>



</body>
</html>
